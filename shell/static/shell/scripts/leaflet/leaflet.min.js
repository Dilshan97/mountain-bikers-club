var version='1.3.4+master.620a7c95',freeze=Object.freeze;Object.freeze=function(o){return o};function extend(o){var _,g,h,P;for(g=1,h=arguments.length;g<h;g++)for(_ in P=arguments[g],P)o[_]=P[_];return o}var create=Object.create||function(){function o(){}return function(_){return o.prototype=_,new o}}();function bind(o,_){var g=Array.prototype.slice;if(o.bind)return o.bind.apply(o,g.call(arguments,1));var h=g.call(arguments,2);return function(){return o.apply(_,h.length?h.concat(g.call(arguments)):arguments)}}var lastId=0;function stamp(o){return o._leaflet_id=o._leaflet_id||++lastId,o._leaflet_id}function throttle(o,_,g){var h,P,T,C;return C=function(){h=!1,P&&(T.apply(g,P),P=!1)},T=function(){h?P=arguments:(o.apply(g,arguments),setTimeout(C,_),h=!0)},T}function wrapNum(o,_,g){var h=_[1],P=_[0],T=h-P;return o===h&&g?o:((o-P)%T+T)%T+P}function falseFn(){return!1}function formatNum(o,_){var g=Math.pow(10,_===void 0?6:_);return Math.round(o*g)/g}function trim(o){return o.trim?o.trim():o.replace(/^\s+|\s+$/g,'')}function splitWords(o){return trim(o).split(/\s+/)}function setOptions(o,_){for(var g in o.hasOwnProperty('options')||(o.options=o.options?create(o.options):{}),_)o.options[g]=_[g];return o.options}function getParamString(o,_,g){var h=[];for(var P in o)h.push(encodeURIComponent(g?P.toUpperCase():P)+'='+encodeURIComponent(o[P]));return(_&&-1!==_.indexOf('?')?'&':'?')+h.join('&')}var templateRe=/\{ *([\w_-]+) *\}/g;function template(o,_){return o.replace(templateRe,function(g,h){var P=_[h];if(P===void 0)throw new Error('No value provided for variable '+g);else'function'==typeof P&&(P=P(_));return P})}var isArray=Array.isArray||function(o){return'[object Array]'===Object.prototype.toString.call(o)};function indexOf(o,_){for(var g=0;g<o.length;g++)if(o[g]===_)return g;return-1}var emptyImageUrl='data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';function getPrefixed(o){return window['webkit'+o]||window['moz'+o]||window['ms'+o]}var lastTime=0;function timeoutDefer(o){var _=+new Date,g=Math.max(0,16-(_-lastTime));return lastTime=_+g,window.setTimeout(o,g)}var requestFn=window.requestAnimationFrame||getPrefixed('RequestAnimationFrame')||timeoutDefer,cancelFn=window.cancelAnimationFrame||getPrefixed('CancelAnimationFrame')||getPrefixed('CancelRequestAnimationFrame')||function(o){window.clearTimeout(o)};function requestAnimFrame(o,_,g){return g&&requestFn===timeoutDefer?void o.call(_):requestFn.call(window,bind(o,_))}function cancelAnimFrame(o){o&&cancelFn.call(window,o)}var Util=(Object.freeze||Object)({freeze:freeze,extend:extend,create:create,bind:bind,lastId:lastId,stamp:stamp,throttle:throttle,wrapNum:wrapNum,falseFn:falseFn,formatNum:formatNum,trim:trim,splitWords:splitWords,setOptions:setOptions,getParamString:getParamString,template:template,isArray:isArray,indexOf:indexOf,emptyImageUrl:emptyImageUrl,requestFn:requestFn,cancelFn:cancelFn,requestAnimFrame:requestAnimFrame,cancelAnimFrame:cancelAnimFrame});function Class(){}Class.extend=function(o){var _=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=_.__super__=this.prototype,h=create(g);for(var P in h.constructor=_,_.prototype=h,this)this.hasOwnProperty(P)&&'prototype'!==P&&'__super__'!==P&&(_[P]=this[P]);return o.statics&&(extend(_,o.statics),delete o.statics),o.includes&&(checkDeprecatedMixinEvents(o.includes),extend.apply(null,[h].concat(o.includes)),delete o.includes),h.options&&(o.options=extend(create(h.options),o.options)),extend(h,o),h._initHooks=[],h.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,C=h._initHooks.length;T<C;T++)h._initHooks[T].call(this)}},_},Class.include=function(o){return extend(this.prototype,o),this},Class.mergeOptions=function(o){return extend(this.prototype.options,o),this},Class.addInitHook=function(o){var _=Array.prototype.slice.call(arguments,1),g='function'==typeof o?o:function(){this[o].apply(this,_)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function checkDeprecatedMixinEvents(o){if('undefined'!=typeof L&&L&&L.Mixin){o=isArray(o)?o:[o];for(var _=0;_<o.length;_++)o[_]===L.Mixin.Events&&console.warn('Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.',new Error().stack)}}var Events={on:function(o,_,g){if('object'==typeof o)for(var h in o)this._on(h,o[h],_);else{o=splitWords(o);for(var P=0,T=o.length;P<T;P++)this._on(o[P],_,g)}return this},off:function(o,_,g){if(!o)delete this._events;else if('object'==typeof o)for(var h in o)this._off(h,o[h],_);else{o=splitWords(o);for(var P=0,T=o.length;P<T;P++)this._off(o[P],_,g)}return this},_on:function(o,_,g){this._events=this._events||{};var h=this._events[o];h||(h=[],this._events[o]=h),g===this&&(g=void 0);for(var P={fn:_,ctx:g},T=h,C=0,Z=T.length;C<Z;C++)if(T[C].fn===_&&T[C].ctx===g)return;T.push(P)},_off:function(o,_,g){var h,P,T;if(this._events&&(h=this._events[o],!!h)){if(!_){for(P=0,T=h.length;P<T;P++)h[P].fn=falseFn;return void delete this._events[o]}if(g===this&&(g=void 0),h)for(P=0,T=h.length;P<T;P++){var C=h[P];if(C.ctx===g&&C.fn===_)return C.fn=falseFn,this._firingCount&&(this._events[o]=h=h.slice()),void h.splice(P,1)}}},fire:function(o,_,g){if(!this.listens(o,g))return this;var h=extend({},_,{type:o,target:this,sourceTarget:_&&_.sourceTarget||this});if(this._events){var P=this._events[o];if(P){this._firingCount=this._firingCount+1||1;for(var T=0,C=P.length,Z;T<C;T++)Z=P[T],Z.fn.call(Z.ctx||this,h);this._firingCount--}}return g&&this._propagateEvent(h),this},listens:function(o,_){var g=this._events&&this._events[o];if(g&&g.length)return!0;if(_)for(var h in this._eventParents)if(this._eventParents[h].listens(o,_))return!0;return!1},once:function(o,_,g){if('object'==typeof o){for(var h in o)this.once(h,o[h],_);return this}var P=bind(function(){this.off(o,_,g).off(o,P,g)},this);return this.on(o,_,g).on(o,P,g)},addEventParent:function(o){return this._eventParents=this._eventParents||{},this._eventParents[stamp(o)]=o,this},removeEventParent:function(o){return this._eventParents&&delete this._eventParents[stamp(o)],this},_propagateEvent:function(o){for(var _ in this._eventParents)this._eventParents[_].fire(o.type,extend({layer:o.target,propagatedFrom:o.target},o),!0)}};Events.addEventListener=Events.on,Events.removeEventListener=Events.clearAllEventListeners=Events.off,Events.addOneTimeEventListener=Events.once,Events.fireEvent=Events.fire,Events.hasEventListeners=Events.listens;var Evented=Class.extend(Events);function Point(o,_,g){this.x=g?Math.round(o):o,this.y=g?Math.round(_):_}var trunc=Math.trunc||function(o){return 0<o?Math.floor(o):Math.ceil(o)};Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(o){return this.clone()._add(toPoint(o))},_add:function(o){return this.x+=o.x,this.y+=o.y,this},subtract:function(o){return this.clone()._subtract(toPoint(o))},_subtract:function(o){return this.x-=o.x,this.y-=o.y,this},divideBy:function(o){return this.clone()._divideBy(o)},_divideBy:function(o){return this.x/=o,this.y/=o,this},multiplyBy:function(o){return this.clone()._multiplyBy(o)},_multiplyBy:function(o){return this.x*=o,this.y*=o,this},scaleBy:function(o){return new Point(this.x*o.x,this.y*o.y)},unscaleBy:function(o){return new Point(this.x/o.x,this.y/o.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=trunc(this.x),this.y=trunc(this.y),this},distanceTo:function(o){o=toPoint(o);var _=o.x-this.x,g=o.y-this.y;return Math.sqrt(_*_+g*g)},equals:function(o){return o=toPoint(o),o.x===this.x&&o.y===this.y},contains:function(o){return o=toPoint(o),Math.abs(o.x)<=Math.abs(this.x)&&Math.abs(o.y)<=Math.abs(this.y)},toString:function(){return'Point('+formatNum(this.x)+', '+formatNum(this.y)+')'}};function toPoint(o,_,g){return o instanceof Point?o:isArray(o)?new Point(o[0],o[1]):void 0===o||null===o?o:'object'==typeof o&&'x'in o&&'y'in o?new Point(o.x,o.y):new Point(o,_,g)}function Bounds(o,_){if(o)for(var g=_?[o,_]:o,h=0,P=g.length;h<P;h++)this.extend(g[h])}Bounds.prototype={extend:function(o){return o=toPoint(o),this.min||this.max?(this.min.x=Math.min(o.x,this.min.x),this.max.x=Math.max(o.x,this.max.x),this.min.y=Math.min(o.y,this.min.y),this.max.y=Math.max(o.y,this.max.y)):(this.min=o.clone(),this.max=o.clone()),this},getCenter:function(o){return new Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,o)},getBottomLeft:function(){return new Point(this.min.x,this.max.y)},getTopRight:function(){return new Point(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(o){var _,g;return o='number'==typeof o[0]||o instanceof Point?toPoint(o):toBounds(o),o instanceof Bounds?(_=o.min,g=o.max):_=g=o,_.x>=this.min.x&&g.x<=this.max.x&&_.y>=this.min.y&&g.y<=this.max.y},intersects:function(o){o=toBounds(o);var _=this.min,g=this.max,h=o.min,P=o.max,T=P.x>=_.x&&h.x<=g.x,C=P.y>=_.y&&h.y<=g.y;return T&&C},overlaps:function(o){o=toBounds(o);var _=this.min,g=this.max,h=o.min,P=o.max,T=P.x>_.x&&h.x<g.x,C=P.y>_.y&&h.y<g.y;return T&&C},isValid:function(){return!!(this.min&&this.max)}};function toBounds(o,_){return!o||o instanceof Bounds?o:new Bounds(o,_)}function LatLngBounds(o,_){if(o)for(var g=_?[o,_]:o,h=0,P=g.length;h<P;h++)this.extend(g[h])}LatLngBounds.prototype={extend:function(o){var _=this._southWest,g=this._northEast,h,P;if(o instanceof LatLng)h=o,P=o;else{if(!(o instanceof LatLngBounds))return o?this.extend(toLatLng(o)||toLatLngBounds(o)):this;if(h=o._southWest,P=o._northEast,!h||!P)return this}return _||g?(_.lat=Math.min(h.lat,_.lat),_.lng=Math.min(h.lng,_.lng),g.lat=Math.max(P.lat,g.lat),g.lng=Math.max(P.lng,g.lng)):(this._southWest=new LatLng(h.lat,h.lng),this._northEast=new LatLng(P.lat,P.lng)),this},pad:function(o){var _=this._southWest,g=this._northEast,h=Math.abs(_.lat-g.lat)*o,P=Math.abs(_.lng-g.lng)*o;return new LatLngBounds(new LatLng(_.lat-h,_.lng-P),new LatLng(g.lat+h,g.lng+P))},getCenter:function(){return new LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(o){o='number'==typeof o[0]||o instanceof LatLng||'lat'in o?toLatLng(o):toLatLngBounds(o);var _=this._southWest,g=this._northEast,h,P;return o instanceof LatLngBounds?(h=o.getSouthWest(),P=o.getNorthEast()):h=P=o,h.lat>=_.lat&&P.lat<=g.lat&&h.lng>=_.lng&&P.lng<=g.lng},intersects:function(o){o=toLatLngBounds(o);var _=this._southWest,g=this._northEast,h=o.getSouthWest(),P=o.getNorthEast(),T=P.lat>=_.lat&&h.lat<=g.lat,C=P.lng>=_.lng&&h.lng<=g.lng;return T&&C},overlaps:function(o){o=toLatLngBounds(o);var _=this._southWest,g=this._northEast,h=o.getSouthWest(),P=o.getNorthEast(),T=P.lat>_.lat&&h.lat<g.lat,C=P.lng>_.lng&&h.lng<g.lng;return T&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(',')},equals:function(o,_){return!!o&&(o=toLatLngBounds(o),this._southWest.equals(o.getSouthWest(),_)&&this._northEast.equals(o.getNorthEast(),_))},isValid:function(){return!!(this._southWest&&this._northEast)}};function toLatLngBounds(o,_){return o instanceof LatLngBounds?o:new LatLngBounds(o,_)}function LatLng(o,_,g){if(isNaN(o)||isNaN(_))throw new Error('Invalid LatLng object: ('+o+', '+_+')');this.lat=+o,this.lng=+_,g!==void 0&&(this.alt=+g)}LatLng.prototype={equals:function(o,_){if(!o)return!1;o=toLatLng(o);var g=Math.max(Math.abs(this.lat-o.lat),Math.abs(this.lng-o.lng));return g<=(_===void 0?1e-9:_)},toString:function(o){return'LatLng('+formatNum(this.lat,o)+', '+formatNum(this.lng,o)+')'},distanceTo:function(o){return Earth.distance(this,toLatLng(o))},wrap:function(){return Earth.wrapLatLng(this)},toBounds:function(o){var _=180*o/40075017,g=_/Math.cos(Math.PI/180*this.lat);return toLatLngBounds([this.lat-_,this.lng-g],[this.lat+_,this.lng+g])},clone:function(){return new LatLng(this.lat,this.lng,this.alt)}};function toLatLng(o,_,g){return o instanceof LatLng?o:isArray(o)&&'object'!=typeof o[0]?3===o.length?new LatLng(o[0],o[1],o[2]):2===o.length?new LatLng(o[0],o[1]):null:void 0===o||null===o?o:'object'==typeof o&&'lat'in o?new LatLng(o.lat,'lng'in o?o.lng:o.lon,o.alt):void 0===_?null:new LatLng(o,_,g)}var CRS={latLngToPoint:function(o,_){var g=this.projection.project(o),h=this.scale(_);return this.transformation._transform(g,h)},pointToLatLng:function(o,_){var g=this.scale(_),h=this.transformation.untransform(o,g);return this.projection.unproject(h)},project:function(o){return this.projection.project(o)},unproject:function(o){return this.projection.unproject(o)},scale:function(o){return 256*Math.pow(2,o)},zoom:function(o){return Math.log(o/256)/Math.LN2},getProjectedBounds:function(o){if(this.infinite)return null;var _=this.projection.bounds,g=this.scale(o),h=this.transformation.transform(_.min,g),P=this.transformation.transform(_.max,g);return new Bounds(h,P)},infinite:!1,wrapLatLng:function(o){var _=this.wrapLng?wrapNum(o.lng,this.wrapLng,!0):o.lng,g=this.wrapLat?wrapNum(o.lat,this.wrapLat,!0):o.lat,h=o.alt;return new LatLng(g,_,h)},wrapLatLngBounds:function(o){var _=o.getCenter(),g=this.wrapLatLng(_),h=_.lat-g.lat,P=_.lng-g.lng;if(0==h&&0==P)return o;var T=o.getSouthWest(),C=o.getNorthEast(),Z=new LatLng(T.lat-h,T.lng-P),E=new LatLng(C.lat-h,C.lng-P);return new LatLngBounds(Z,E)}},Earth=extend({},CRS,{wrapLng:[-180,180],R:6371000,distance:function(o,_){var g=Math.PI/180,h=o.lat*g,P=_.lat*g,T=Math.sin((_.lat-o.lat)*g/2),C=Math.sin((_.lng-o.lng)*g/2),Z=T*T+Math.cos(h)*Math.cos(P)*C*C,E=2*Math.atan2(Math.sqrt(Z),Math.sqrt(1-Z));return this.R*E}}),SphericalMercator={R:6378137,MAX_LATITUDE:85.0511287798,project:function(o){var _=Math.PI/180,g=this.MAX_LATITUDE,h=Math.max(Math.min(g,o.lat),-g),P=Math.sin(h*_);return new Point(this.R*o.lng*_,this.R*Math.log((1+P)/(1-P))/2)},unproject:function(o){var _=180/Math.PI;return new LatLng((2*Math.atan(Math.exp(o.y/this.R))-Math.PI/2)*_,o.x*_/this.R)},bounds:function(){var o=6378137*Math.PI;return new Bounds([-o,-o],[o,o])}()};function Transformation(o,_,g,h){return isArray(o)?(this._a=o[0],this._b=o[1],this._c=o[2],void(this._d=o[3])):void(this._a=o,this._b=_,this._c=g,this._d=h)}Transformation.prototype={transform:function(o,_){return this._transform(o.clone(),_)},_transform:function(o,_){return _=_||1,o.x=_*(this._a*o.x+this._b),o.y=_*(this._c*o.y+this._d),o},untransform:function(o,_){return _=_||1,new Point((o.x/_-this._b)/this._a,(o.y/_-this._d)/this._c)}};function toTransformation(o,_,g,h){return new Transformation(o,_,g,h)}var EPSG3857=extend({},Earth,{code:'EPSG:3857',projection:SphericalMercator,transformation:function(){var o=0.5/(Math.PI*SphericalMercator.R);return toTransformation(o,0.5,-o,0.5)}()}),EPSG900913=extend({},EPSG3857,{code:'EPSG:900913'});function svgCreate(o){return document.createElementNS('http://www.w3.org/2000/svg',o)}function pointsToPath(o,_){var g='',h,P,T,C,Z,E;for(h=0,T=o.length;h<T;h++){for(Z=o[h],P=0,C=Z.length;P<C;P++)E=Z[P],g+=(P?'L':'M')+E.x+' '+E.y;g+=_?svg?'z':'x':''}return g||'M0 0'}var style$1=document.documentElement.style,ie='ActiveXObject'in window,ielt9=ie&&!document.addEventListener,edge='msLaunchUri'in navigator&&!('documentMode'in document),webkit=userAgentContains('webkit'),android=userAgentContains('android'),android23=userAgentContains('android 2')||userAgentContains('android 3'),webkitVer=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),androidStock=android&&userAgentContains('Google')&&537>webkitVer&&!('AudioNode'in window),opera=!!window.opera,chrome=userAgentContains('chrome'),gecko=userAgentContains('gecko')&&!webkit&&!opera&&!ie,safari=!chrome&&userAgentContains('safari'),phantom=userAgentContains('phantom'),opera12='OTransition'in style$1,win=0===navigator.platform.indexOf('Win'),ie3d=ie&&'transition'in style$1,webkit3d='WebKitCSSMatrix'in window&&'m11'in new window.WebKitCSSMatrix&&!android23,gecko3d='MozPerspective'in style$1,any3d=!window.L_DISABLE_3D&&(ie3d||webkit3d||gecko3d)&&!opera12&&!phantom,mobile='undefined'!=typeof orientation||userAgentContains('mobile'),mobileWebkit=mobile&&webkit,mobileWebkit3d=mobile&&webkit3d,msPointer=!window.PointerEvent&&window.MSPointerEvent,pointer=!!(window.PointerEvent||msPointer),touch=!window.L_NO_TOUCH&&(pointer||'ontouchstart'in window||window.DocumentTouch&&document instanceof window.DocumentTouch),mobileOpera=mobile&&opera,mobileGecko=mobile&&gecko,retina=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),canvas=function(){return!!document.createElement('canvas').getContext}(),svg=!!(document.createElementNS&&svgCreate('svg').createSVGRect),vml=!svg&&function(){try{var o=document.createElement('div');o.innerHTML='<v:shape adj="1"/>';var _=o.firstChild;return _.style.behavior='url(#default#VML)',_&&'object'==typeof _.adj}catch(g){return!1}}();function userAgentContains(o){return 0<=navigator.userAgent.toLowerCase().indexOf(o)}var Browser=(Object.freeze||Object)({ie:ie,ielt9:ielt9,edge:edge,webkit:webkit,android:android,android23:android23,androidStock:androidStock,opera:opera,chrome:chrome,gecko:gecko,safari:safari,phantom:phantom,opera12:opera12,win:win,ie3d:ie3d,webkit3d:webkit3d,gecko3d:gecko3d,any3d:any3d,mobile:mobile,mobileWebkit:mobileWebkit,mobileWebkit3d:mobileWebkit3d,msPointer:msPointer,pointer:pointer,touch:touch,mobileOpera:mobileOpera,mobileGecko:mobileGecko,retina:retina,canvas:canvas,svg:svg,vml:vml}),POINTER_DOWN=msPointer?'MSPointerDown':'pointerdown',POINTER_MOVE=msPointer?'MSPointerMove':'pointermove',POINTER_UP=msPointer?'MSPointerUp':'pointerup',POINTER_CANCEL=msPointer?'MSPointerCancel':'pointercancel',TAG_WHITE_LIST=['INPUT','SELECT','OPTION'],_pointers={},_pointerDocListener=!1,_pointersCount=0;function addPointerListener(o,_,g,h){return'touchstart'===_?_addPointerStart(o,g,h):'touchmove'===_?_addPointerMove(o,g,h):'touchend'==_&&_addPointerEnd(o,g,h),this}function removePointerListener(o,_,g){var h=o['_leaflet_'+_+g];return'touchstart'===_?o.removeEventListener(POINTER_DOWN,h,!1):'touchmove'===_?o.removeEventListener(POINTER_MOVE,h,!1):'touchend'==_&&(o.removeEventListener(POINTER_UP,h,!1),o.removeEventListener(POINTER_CANCEL,h,!1)),this}function _addPointerStart(o,_,g){var h=bind(function(P){if('mouse'!==P.pointerType&&P.MSPOINTER_TYPE_MOUSE&&P.pointerType!==P.MSPOINTER_TYPE_MOUSE)if(0>TAG_WHITE_LIST.indexOf(P.target.tagName))preventDefault(P);else return;_handlePointer(P,_)});o['_leaflet_touchstart'+g]=h,o.addEventListener(POINTER_DOWN,h,!1),_pointerDocListener||(document.documentElement.addEventListener(POINTER_DOWN,_globalPointerDown,!0),document.documentElement.addEventListener(POINTER_MOVE,_globalPointerMove,!0),document.documentElement.addEventListener(POINTER_UP,_globalPointerUp,!0),document.documentElement.addEventListener(POINTER_CANCEL,_globalPointerUp,!0),_pointerDocListener=!0)}function _globalPointerDown(o){_pointers[o.pointerId]=o,_pointersCount++}function _globalPointerMove(o){_pointers[o.pointerId]&&(_pointers[o.pointerId]=o)}function _globalPointerUp(o){delete _pointers[o.pointerId],_pointersCount--}function _handlePointer(o,_){for(var g in o.touches=[],_pointers)o.touches.push(_pointers[g]);o.changedTouches=[o],_(o)}function _addPointerMove(o,_,g){var h=function(P){(P.pointerType===P.MSPOINTER_TYPE_MOUSE||'mouse'===P.pointerType)&&0===P.buttons||_handlePointer(P,_)};o['_leaflet_touchmove'+g]=h,o.addEventListener(POINTER_MOVE,h,!1)}function _addPointerEnd(o,_,g){var h=function(P){_handlePointer(P,_)};o['_leaflet_touchend'+g]=h,o.addEventListener(POINTER_UP,h,!1),o.addEventListener(POINTER_CANCEL,h,!1)}var _touchstart=msPointer?'MSPointerDown':pointer?'pointerdown':'touchstart',_touchend=msPointer?'MSPointerUp':pointer?'pointerup':'touchend',_pre='_leaflet_';function addDoubleTapListener(o,_,g){function h(B){var A;if(pointer){if(!edge||'mouse'===B.pointerType)return;A=_pointersCount}else A=B.touches.length;if(!(1<A)){var I=Date.now(),O=I-(T||I);C=B.touches?B.touches[0]:B,Z=0<O&&O<=250,T=I}}function P(B){if(Z&&!C.cancelBubble){if(pointer){if(!edge||'mouse'===B.pointerType)return;var A={},I,O;for(O in C)I=C[O],A[O]=I&&I.bind?I.bind(C):I;C=A}C.type='dblclick',_(C),T=null}}var Z=!1,T,C;return o[_pre+_touchstart+g]=h,o[_pre+_touchend+g]=P,o[_pre+'dblclick'+g]=_,o.addEventListener(_touchstart,h,!1),o.addEventListener(_touchend,P,!1),o.addEventListener('dblclick',_,!1),this}function removeDoubleTapListener(o,_){var g=o[_pre+_touchstart+_],h=o[_pre+_touchend+_],P=o[_pre+'dblclick'+_];return o.removeEventListener(_touchstart,g,!1),o.removeEventListener(_touchend,h,!1),edge||o.removeEventListener('dblclick',P,!1),this}var TRANSFORM=testProp(['transform','webkitTransform','OTransform','MozTransform','msTransform']),TRANSITION=testProp(['webkitTransition','transition','OTransition','MozTransition','msTransition']),TRANSITION_END='webkitTransition'===TRANSITION||'OTransition'===TRANSITION?TRANSITION+'End':'transitionend';function get(o){return'string'==typeof o?document.getElementById(o):o}function getStyle(o,_){var g=o.style[_]||o.currentStyle&&o.currentStyle[_];if((!g||'auto'===g)&&document.defaultView){var h=document.defaultView.getComputedStyle(o,null);g=h?h[_]:null}return'auto'===g?null:g}function create$1(o,_,g){var h=document.createElement(o);return h.className=_||'',g&&g.appendChild(h),h}function remove(o){var _=o.parentNode;_&&_.removeChild(o)}function empty(o){for(;o.firstChild;)o.removeChild(o.firstChild)}function toFront(o){var _=o.parentNode;_.lastChild!==o&&_.appendChild(o)}function toBack(o){var _=o.parentNode;_.firstChild!==o&&_.insertBefore(o,_.firstChild)}function hasClass(o,_){if(o.classList!==void 0)return o.classList.contains(_);var g=getClass(o);return 0<g.length&&new RegExp('(^|\\s)'+_+'(\\s|$)').test(g)}function addClass(o,_){if(o.classList!==void 0)for(var g=splitWords(_),h=0,P=g.length;h<P;h++)o.classList.add(g[h]);else if(!hasClass(o,_)){var T=getClass(o);setClass(o,(T?T+' ':'')+_)}}function removeClass(o,_){o.classList===void 0?setClass(o,trim((' '+getClass(o)+' ').replace(' '+_+' ',' '))):o.classList.remove(_)}function setClass(o,_){o.className.baseVal===void 0?o.className=_:o.className.baseVal=_}function getClass(o){return o.className.baseVal===void 0?o.className:o.className.baseVal}function setOpacity(o,_){'opacity'in o.style?o.style.opacity=_:'filter'in o.style&&_setOpacityIE(o,_)}function _setOpacityIE(o,_){var g=!1,h='DXImageTransform.Microsoft.Alpha';try{g=o.filters.item(h)}catch(P){if(1===_)return}_=Math.round(100*_),g?(g.Enabled=100!==_,g.Opacity=_):o.style.filter+=' progid:'+h+'(opacity='+_+')'}function testProp(o){for(var _=document.documentElement.style,g=0;g<o.length;g++)if(o[g]in _)return o[g];return!1}function setTransform(o,_,g){var h=_||new Point(0,0);o.style[TRANSFORM]=(ie3d?'translate('+h.x+'px,'+h.y+'px)':'translate3d('+h.x+'px,'+h.y+'px,0)')+(g?' scale('+g+')':'')}function setPosition(o,_){o._leaflet_pos=_,any3d?setTransform(o,_):(o.style.left=_.x+'px',o.style.top=_.y+'px')}function getPosition(o){return o._leaflet_pos||new Point(0,0)}var disableTextSelection,enableTextSelection,_userSelect;if('onselectstart'in document)disableTextSelection=function(){on(window,'selectstart',preventDefault)},enableTextSelection=function(){off(window,'selectstart',preventDefault)};else{var userSelectProperty=testProp(['userSelect','WebkitUserSelect','OUserSelect','MozUserSelect','msUserSelect']);disableTextSelection=function(){if(userSelectProperty){var o=document.documentElement.style;_userSelect=o[userSelectProperty],o[userSelectProperty]='none'}},enableTextSelection=function(){userSelectProperty&&(document.documentElement.style[userSelectProperty]=_userSelect,_userSelect=void 0)}}function disableImageDrag(){on(window,'dragstart',preventDefault)}function enableImageDrag(){off(window,'dragstart',preventDefault)}var _outlineElement,_outlineStyle;function preventOutline(o){for(;-1===o.tabIndex;)o=o.parentNode;o.style&&(restoreOutline(),_outlineElement=o,_outlineStyle=o.style.outline,o.style.outline='none',on(window,'keydown',restoreOutline))}function restoreOutline(){_outlineElement&&(_outlineElement.style.outline=_outlineStyle,_outlineElement=void 0,_outlineStyle=void 0,off(window,'keydown',restoreOutline))}function getSizedParentNode(o){do o=o.parentNode;while((!o.offsetWidth||!o.offsetHeight)&&o!==document.body);return o}function getScale(o){var _=o.getBoundingClientRect();return{x:_.width/o.offsetWidth||1,y:_.height/o.offsetHeight||1,boundingClientRect:_}}var DomUtil=(Object.freeze||Object)({TRANSFORM:TRANSFORM,TRANSITION:TRANSITION,TRANSITION_END:TRANSITION_END,get:get,getStyle:getStyle,create:create$1,remove:remove,empty:empty,toFront:toFront,toBack:toBack,hasClass:hasClass,addClass:addClass,removeClass:removeClass,setClass:setClass,getClass:getClass,setOpacity:setOpacity,testProp:testProp,setTransform:setTransform,setPosition:setPosition,getPosition:getPosition,disableTextSelection:disableTextSelection,enableTextSelection:enableTextSelection,disableImageDrag:disableImageDrag,enableImageDrag:enableImageDrag,preventOutline:preventOutline,restoreOutline:restoreOutline,getSizedParentNode:getSizedParentNode,getScale:getScale});function on(o,_,g,h){if('object'==typeof _)for(var P in _)addOne(o,P,_[P],g);else{_=splitWords(_);for(var T=0,C=_.length;T<C;T++)addOne(o,_[T],g,h)}return this}var eventsKey='_leaflet_events';function off(o,_,g,h){if('object'==typeof _)for(var P in _)removeOne(o,P,_[P],g);else if(_){_=splitWords(_);for(var T=0,C=_.length;T<C;T++)removeOne(o,_[T],g,h)}else{for(var Z in o[eventsKey])removeOne(o,Z,o[eventsKey][Z]);delete o[eventsKey]}return this}function addOne(o,_,g,h){var P=_+stamp(g)+(h?'_'+stamp(h):'');if(o[eventsKey]&&o[eventsKey][P])return this;var T=function(Z){return g.call(h||o,Z||window.event)},C=T;pointer&&0===_.indexOf('touch')?addPointerListener(o,_,T,P):touch&&'dblclick'===_&&addDoubleTapListener&&!(pointer&&chrome)?addDoubleTapListener(o,T,P):'addEventListener'in o?'mousewheel'===_?o.addEventListener('onwheel'in o?'wheel':'mousewheel',T,!1):'mouseenter'===_||'mouseleave'===_?(T=function(Z){Z=Z||window.event,isExternalTarget(o,Z)&&C(Z)},o.addEventListener('mouseenter'===_?'mouseover':'mouseout',T,!1)):('click'==_&&android&&(T=function(Z){filterClick(Z,C)}),o.addEventListener(_,T,!1)):'attachEvent'in o&&o.attachEvent('on'+_,T),o[eventsKey]=o[eventsKey]||{},o[eventsKey][P]=T}function removeOne(o,_,g,h){var P=_+stamp(g)+(h?'_'+stamp(h):''),T=o[eventsKey]&&o[eventsKey][P];return T?void(pointer&&0===_.indexOf('touch')?removePointerListener(o,_,P):touch&&'dblclick'===_&&removeDoubleTapListener&&!(pointer&&chrome)?removeDoubleTapListener(o,P):'removeEventListener'in o?'mousewheel'===_?o.removeEventListener('onwheel'in o?'wheel':'mousewheel',T,!1):o.removeEventListener('mouseenter'===_?'mouseover':'mouseleave'===_?'mouseout':_,T,!1):'detachEvent'in o&&o.detachEvent('on'+_,T),o[eventsKey][P]=null):this}function stopPropagation(o){return o.stopPropagation?o.stopPropagation():o.originalEvent?o.originalEvent._stopped=!0:o.cancelBubble=!0,skipped(o),this}function disableScrollPropagation(o){return addOne(o,'mousewheel',stopPropagation),this}function disableClickPropagation(o){return on(o,'mousedown touchstart dblclick',stopPropagation),addOne(o,'click',fakeStop),this}function preventDefault(o){return o.preventDefault?o.preventDefault():o.returnValue=!1,this}function stop(o){return preventDefault(o),stopPropagation(o),this}function getMousePosition(o,_){if(!_)return new Point(o.clientX,o.clientY);var g=getScale(_),h=g.boundingClientRect;return new Point((o.clientX-h.left)/g.x-_.clientLeft,(o.clientY-h.top)/g.y-_.clientTop)}var wheelPxFactor=win&&chrome?2*window.devicePixelRatio:gecko?window.devicePixelRatio:1;function getWheelDelta(o){return edge?o.wheelDeltaY/2:o.deltaY&&0===o.deltaMode?-o.deltaY/wheelPxFactor:o.deltaY&&1===o.deltaMode?20*-o.deltaY:o.deltaY&&2===o.deltaMode?60*-o.deltaY:o.deltaX||o.deltaZ?0:o.wheelDelta?(o.wheelDeltaY||o.wheelDelta)/2:o.detail&&32765>Math.abs(o.detail)?20*-o.detail:o.detail?60*(o.detail/-32765):0}var skipEvents={};function fakeStop(o){skipEvents[o.type]=!0}function skipped(o){var _=skipEvents[o.type];return skipEvents[o.type]=!1,_}function isExternalTarget(o,_){var g=_.relatedTarget;if(!g)return!0;try{for(;g&&g!==o;)g=g.parentNode}catch(h){return!1}return g!==o}var lastClick;function filterClick(o,_){var g=o.timeStamp||o.originalEvent&&o.originalEvent.timeStamp,h=lastClick&&g-lastClick;return h&&100<h&&500>h||o.target._simulatedClick&&!o._simulated?void stop(o):void(lastClick=g,_(o))}var DomEvent=(Object.freeze||Object)({on:on,off:off,stopPropagation:stopPropagation,disableScrollPropagation:disableScrollPropagation,disableClickPropagation:disableClickPropagation,preventDefault:preventDefault,stop:stop,getMousePosition:getMousePosition,getWheelDelta:getWheelDelta,fakeStop:fakeStop,skipped:skipped,isExternalTarget:isExternalTarget,addListener:on,removeListener:off}),PosAnimation=Evented.extend({run:function(o,_,g,h){this.stop(),this._el=o,this._inProgress=!0,this._duration=g||0.25,this._easeOutPower=1/Math.max(h||0.5,0.2),this._startPos=getPosition(o),this._offset=_.subtract(this._startPos),this._startTime=+new Date,this.fire('start'),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=requestAnimFrame(this._animate,this),this._step()},_step:function(o){var _=+new Date-this._startTime,g=1e3*this._duration;_<g?this._runFrame(this._easeOut(_/g),o):(this._runFrame(1),this._complete())},_runFrame:function(o,_){var g=this._startPos.add(this._offset.multiplyBy(o));_&&g._round(),setPosition(this._el,g),this.fire('step')},_complete:function(){cancelAnimFrame(this._animId),this._inProgress=!1,this.fire('end')},_easeOut:function(o){return 1-Math.pow(1-o,this._easeOutPower)}}),Map=Evented.extend({options:{crs:EPSG3857,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(o,_){_=setOptions(this,_),this._initContainer(o),this._initLayout(),this._onResize=bind(this._onResize,this),this._initEvents(),_.maxBounds&&this.setMaxBounds(_.maxBounds),_.zoom!==void 0&&(this._zoom=this._limitZoom(_.zoom)),_.center&&_.zoom!==void 0&&this.setView(toLatLng(_.center),_.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=TRANSITION&&any3d&&!mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),on(this._proxy,TRANSITION_END,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(o,_,g){if(_=void 0===_?this._zoom:this._limitZoom(_),o=this._limitCenter(toLatLng(o),_,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&!0!==g){void 0!==g.animate&&(g.zoom=extend({animate:g.animate},g.zoom),g.pan=extend({animate:g.animate,duration:g.duration},g.pan));var h=this._zoom===_?this._tryAnimatedPan(o,g.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(o,_,g.zoom);if(h)return clearTimeout(this._sizeTimer),this}return this._resetView(o,_),this},setZoom:function(o,_){return this._loaded?this.setView(this.getCenter(),o,{zoom:_}):(this._zoom=o,this)},zoomIn:function(o,_){return o=o||(any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+o,_)},zoomOut:function(o,_){return o=o||(any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-o,_)},setZoomAround:function(o,_,g){var h=this.getZoomScale(_),P=this.getSize().divideBy(2),T=o instanceof Point?o:this.latLngToContainerPoint(o),C=T.subtract(P).multiplyBy(1-1/h),Z=this.containerPointToLatLng(P.add(C));return this.setView(Z,_,{zoom:g})},_getBoundsCenterZoom:function(o,_){_=_||{},o=o.getBounds?o.getBounds():toLatLngBounds(o);var g=toPoint(_.paddingTopLeft||_.padding||[0,0]),h=toPoint(_.paddingBottomRight||_.padding||[0,0]),P=this.getBoundsZoom(o,!1,g.add(h));if(P='number'==typeof _.maxZoom?Math.min(_.maxZoom,P):P,P===Infinity)return{center:o.getCenter(),zoom:P};var T=h.subtract(g).divideBy(2),C=this.project(o.getSouthWest(),P),Z=this.project(o.getNorthEast(),P),E=this.unproject(C.add(Z).divideBy(2).add(T),P);return{center:E,zoom:P}},fitBounds:function(o,_){if(o=toLatLngBounds(o),!o.isValid())throw new Error('Bounds are not valid.');var g=this._getBoundsCenterZoom(o,_);return this.setView(g.center,g.zoom,_)},fitWorld:function(o){return this.fitBounds([[-90,-180],[90,180]],o)},panTo:function(o,_){return this.setView(o,this._zoom,{pan:_})},panBy:function(o,_){if(o=toPoint(o).round(),_=_||{},!o.x&&!o.y)return this.fire('moveend');if(!0!==_.animate&&!this.getSize().contains(o))return this._resetView(this.unproject(this.project(this.getCenter()).add(o)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),_.noMoveStart||this.fire('movestart'),!1!==_.animate){addClass(this._mapPane,'leaflet-pan-anim');var g=this._getMapPanePos().subtract(o).round();this._panAnim.run(this._mapPane,g,_.duration||0.25,_.easeLinearity)}else this._rawPanBy(o),this.fire('move').fire('moveend');return this},flyTo:function(o,_,g){function h(Y){var X=Y?-1:1,J=Y?D:N,ee=(D*D-N*N+X*U*U*W*W)/(2*J*U*W),te=Math.sqrt(ee*ee+1)-ee,oe=1e-9>te?-18:Math.log(te);return oe}function P(Y){return(Math.exp(Y)-Math.exp(-Y))/2}function T(Y){return(Math.exp(Y)+Math.exp(-Y))/2}function C(Y){return P(Y)/T(Y)}function Z(Y){return N*(T(V)/T(V+H*Y))}function E(Y){return N*(T(V)*C(V+H*Y)-P(V))/U}function B(Y){return 1-Math.pow(1-Y,1.5)}function A(){var Y=(Date.now()-q)/G,X=B(Y)*K;1>=Y?(this._flyToFrame=requestAnimFrame(A,this),this._move(this.unproject(I.add(O.subtract(I).multiplyBy(E(X)/W)),R),this.getScaleZoom(N/Z(X),R),{flyTo:!0})):this._move(o,_)._moveEnd(!0)}if(g=g||{},!1===g.animate||!any3d)return this.setView(o,_,g);this._stop();var I=this.project(this.getCenter()),O=this.project(o),M=this.getSize(),R=this._zoom;o=toLatLng(o),_=void 0===_?R:_;var N=Math.max(M.x,M.y),D=N*this.getZoomScale(R,_),W=O.distanceTo(I)||1,H=1.42,U=H*H,V=h(0),q=Date.now(),K=(h(1)-V)/H,G=g.duration?1e3*g.duration:0.8*(1e3*K);return this._moveStart(!0,g.noMoveStart),A.call(this),this},flyToBounds:function(o,_){var g=this._getBoundsCenterZoom(o,_);return this.flyTo(g.center,g.zoom,_)},setMaxBounds:function(o){return(o=toLatLngBounds(o),!o.isValid())?(this.options.maxBounds=null,this.off('moveend',this._panInsideMaxBounds)):(this.options.maxBounds&&this.off('moveend',this._panInsideMaxBounds),this.options.maxBounds=o,this._loaded&&this._panInsideMaxBounds(),this.on('moveend',this._panInsideMaxBounds))},setMinZoom:function(o){var _=this.options.minZoom;return this.options.minZoom=o,this._loaded&&_!==o&&(this.fire('zoomlevelschange'),this.getZoom()<this.options.minZoom)?this.setZoom(o):this},setMaxZoom:function(o){var _=this.options.maxZoom;return this.options.maxZoom=o,this._loaded&&_!==o&&(this.fire('zoomlevelschange'),this.getZoom()>this.options.maxZoom)?this.setZoom(o):this},panInsideBounds:function(o,_){this._enforcingBounds=!0;var g=this.getCenter(),h=this._limitCenter(g,this._zoom,toLatLngBounds(o));return g.equals(h)||this.panTo(h,_),this._enforcingBounds=!1,this},invalidateSize:function(o){if(!this._loaded)return this;o=extend({animate:!1,pan:!0},!0===o?{animate:!0}:o);var _=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),h=_.divideBy(2).round(),P=g.divideBy(2).round(),T=h.subtract(P);return T.x||T.y?(o.animate&&o.pan?this.panBy(T):(o.pan&&this._rawPanBy(T),this.fire('move'),o.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(bind(this.fire,this,'moveend'),200)):this.fire('moveend')),this.fire('resize',{oldSize:_,newSize:g})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire('viewreset'),this._stop()},locate:function(o){if(o=this._locateOptions=extend({timeout:1e4,watch:!1},o),!('geolocation'in navigator))return this._handleGeolocationError({code:0,message:'Geolocation not supported.'}),this;var _=bind(this._handleGeolocationResponse,this),g=bind(this._handleGeolocationError,this);return o.watch?this._locationWatchId=navigator.geolocation.watchPosition(_,g,o):navigator.geolocation.getCurrentPosition(_,g,o),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(o){var _=o.code,g=o.message||(1===_?'permission denied':2===_?'position unavailable':'timeout');this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire('locationerror',{code:_,message:'Geolocation error: '+g+'.'})},_handleGeolocationResponse:function(o){var _=o.coords.latitude,g=o.coords.longitude,h=new LatLng(_,g),P=h.toBounds(2*o.coords.accuracy),T=this._locateOptions;if(T.setView){var C=this.getBoundsZoom(P);this.setView(h,T.maxZoom?Math.min(C,T.maxZoom):C)}var Z={latlng:h,bounds:P,timestamp:o.timestamp};for(var E in o.coords)'number'==typeof o.coords[E]&&(Z[E]=o.coords[E]);this.fire('locationfound',Z)},addHandler:function(o,_){if(!_)return this;var g=this[o]=new _(this);return this._handlers.push(g),this.options[o]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error('Map container is being reused by another instance');try{delete this._container._leaflet_id,delete this._containerId}catch(_){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(cancelAnimFrame(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire('unload');for(var o in this._layers)this._layers[o].remove();for(o in this._panes)remove(this._panes[o]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(o,_){var g='leaflet-pane'+(o?' leaflet-'+o.replace('Pane','')+'-pane':''),h=create$1('div',g,_||this._mapPane);return o&&(this._panes[o]=h),h},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var o=this.getPixelBounds(),_=this.unproject(o.getBottomLeft()),g=this.unproject(o.getTopRight());return new LatLngBounds(_,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?Infinity:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(o,_,g){o=toLatLngBounds(o),g=toPoint(g||[0,0]);var h=this.getZoom()||0,P=this.getMinZoom(),T=this.getMaxZoom(),C=o.getNorthWest(),Z=o.getSouthEast(),E=this.getSize().subtract(g),B=toBounds(this.project(Z,h),this.project(C,h)).getSize(),A=any3d?this.options.zoomSnap:1,I=E.x/B.x,O=E.y/B.y,M=_?Math.max(I,O):Math.min(I,O);return h=this.getScaleZoom(M,h),A&&(h=Math.round(h/(A/100))*(A/100),h=_?Math.ceil(h/A)*A:Math.floor(h/A)*A),Math.max(P,Math.min(T,h))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(o,_){var g=this._getTopLeftPoint(o,_);return new Bounds(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(o){return this.options.crs.getProjectedBounds(o===void 0?this.getZoom():o)},getPane:function(o){return'string'==typeof o?this._panes[o]:o},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(o,_){var g=this.options.crs;return _=void 0===_?this._zoom:_,g.scale(o)/g.scale(_)},getScaleZoom:function(o,_){var g=this.options.crs;_=_===void 0?this._zoom:_;var h=g.zoom(o*g.scale(_));return isNaN(h)?Infinity:h},project:function(o,_){return _=void 0===_?this._zoom:_,this.options.crs.latLngToPoint(toLatLng(o),_)},unproject:function(o,_){return _=void 0===_?this._zoom:_,this.options.crs.pointToLatLng(toPoint(o),_)},layerPointToLatLng:function(o){var _=toPoint(o).add(this.getPixelOrigin());return this.unproject(_)},latLngToLayerPoint:function(o){var _=this.project(toLatLng(o))._round();return _._subtract(this.getPixelOrigin())},wrapLatLng:function(o){return this.options.crs.wrapLatLng(toLatLng(o))},wrapLatLngBounds:function(o){return this.options.crs.wrapLatLngBounds(toLatLngBounds(o))},distance:function(o,_){return this.options.crs.distance(toLatLng(o),toLatLng(_))},containerPointToLayerPoint:function(o){return toPoint(o).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(o){return toPoint(o).add(this._getMapPanePos())},containerPointToLatLng:function(o){var _=this.containerPointToLayerPoint(toPoint(o));return this.layerPointToLatLng(_)},latLngToContainerPoint:function(o){return this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(o)))},mouseEventToContainerPoint:function(o){return getMousePosition(o,this._container)},mouseEventToLayerPoint:function(o){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(o))},mouseEventToLatLng:function(o){return this.layerPointToLatLng(this.mouseEventToLayerPoint(o))},_initContainer:function(o){var _=this._container=get(o);if(!_)throw new Error('Map container not found.');else if(_._leaflet_id)throw new Error('Map container is already initialized.');on(_,'scroll',this._onScroll,this),this._containerId=stamp(_)},_initLayout:function(){var o=this._container;this._fadeAnimated=this.options.fadeAnimation&&any3d,addClass(o,'leaflet-container'+(touch?' leaflet-touch':'')+(retina?' leaflet-retina':'')+(ielt9?' leaflet-oldie':'')+(safari?' leaflet-safari':'')+(this._fadeAnimated?' leaflet-fade-anim':''));var _=getStyle(o,'position');'absolute'!==_&&'relative'!==_&&'fixed'!==_&&(o.style.position='relative'),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var o=this._panes={};this._paneRenderers={},this._mapPane=this.createPane('mapPane',this._container),setPosition(this._mapPane,new Point(0,0)),this.createPane('tilePane'),this.createPane('shadowPane'),this.createPane('overlayPane'),this.createPane('markerPane'),this.createPane('tooltipPane'),this.createPane('popupPane'),this.options.markerZoomAnimation||(addClass(o.markerPane,'leaflet-zoom-hide'),addClass(o.shadowPane,'leaflet-zoom-hide'))},_resetView:function(o,_){setPosition(this._mapPane,new Point(0,0));var g=!this._loaded;this._loaded=!0,_=this._limitZoom(_),this.fire('viewprereset');var h=this._zoom!==_;this._moveStart(h,!1)._move(o,_)._moveEnd(h),this.fire('viewreset'),g&&this.fire('load')},_moveStart:function(o,_){return o&&this.fire('zoomstart'),_||this.fire('movestart'),this},_move:function(o,_,g){void 0===_&&(_=this._zoom);var h=this._zoom!==_;return this._zoom=_,this._lastCenter=o,this._pixelOrigin=this._getNewPixelOrigin(o),(h||g&&g.pinch)&&this.fire('zoom',g),this.fire('move',g)},_moveEnd:function(o){return o&&this.fire('zoomend'),this.fire('moveend')},_stop:function(){return cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(o){setPosition(this._mapPane,this._getMapPanePos().subtract(o))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error('Set map center and zoom first.')},_initEvents:function(o){this._targets={},this._targets[stamp(this._container)]=this;var _=o?off:on;_(this._container,'click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress',this._handleDOMEvent,this),this.options.trackResize&&_(window,'resize',this._onResize,this),any3d&&this.options.transform3DLimit&&(o?this.off:this.on).call(this,'moveend',this._onMoveEnd)},_onResize:function(){cancelAnimFrame(this._resizeRequest),this._resizeRequest=requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var o=this._getMapPanePos();Math.max(Math.abs(o.x),Math.abs(o.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(o,_){for(var g=[],P='mouseout'===_||'mouseover'===_,T=o.target||o.srcElement,C=!1,h;T;){if(h=this._targets[stamp(T)],h&&('click'===_||'preclick'===_)&&!o._simulated&&this._draggableMoved(h)){C=!0;break}if(h&&h.listens(_,!0)){if(P&&!isExternalTarget(T,o))break;if(g.push(h),P)break}if(T===this._container)break;T=T.parentNode}return g.length||C||P||!isExternalTarget(T,o)||(g=[this]),g},_handleDOMEvent:function(o){if(this._loaded&&!skipped(o)){var _=o.type;('mousedown'===_||'keypress'===_)&&preventOutline(o.target||o.srcElement),this._fireDOMEvent(o,_)}},_mouseEvents:['click','dblclick','mouseover','mouseout','contextmenu'],_fireDOMEvent:function(o,_,g){if('click'===o.type){var h=extend({},o);h.type='preclick',this._fireDOMEvent(h,h.type,g)}if(!o._stopped&&(g=(g||[]).concat(this._findEventTargets(o,_)),!!g.length)){var P=g[0];'contextmenu'===_&&P.listens(_,!0)&&preventDefault(o);var T={originalEvent:o};if('keypress'!==o.type){var C=P.getLatLng&&(!P._radius||10>=P._radius);T.containerPoint=C?this.latLngToContainerPoint(P.getLatLng()):this.mouseEventToContainerPoint(o),T.layerPoint=this.containerPointToLayerPoint(T.containerPoint),T.latlng=C?P.getLatLng():this.layerPointToLatLng(T.layerPoint)}for(var Z=0;Z<g.length;Z++)if(g[Z].fire(_,T,!0),T.originalEvent._stopped||!1===g[Z].options.bubblingMouseEvents&&-1!==indexOf(this._mouseEvents,_))return}},_draggableMoved:function(o){return o=o.dragging&&o.dragging.enabled()?o:this,o.dragging&&o.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var o=0,_=this._handlers.length;o<_;o++)this._handlers[o].disable()},whenReady:function(o,_){return this._loaded?o.call(_||this,{target:this}):this.on('load',o,_),this},_getMapPanePos:function(){return getPosition(this._mapPane)||new Point(0,0)},_moved:function(){var o=this._getMapPanePos();return o&&!o.equals([0,0])},_getTopLeftPoint:function(o,_){var g=o&&_!==void 0?this._getNewPixelOrigin(o,_):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(o,_){var g=this.getSize()._divideBy(2);return this.project(o,_)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(o,_,g){var h=this._getNewPixelOrigin(g,_);return this.project(o,_)._subtract(h)},_latLngBoundsToNewLayerBounds:function(o,_,g){var h=this._getNewPixelOrigin(g,_);return toBounds([this.project(o.getSouthWest(),_)._subtract(h),this.project(o.getNorthWest(),_)._subtract(h),this.project(o.getSouthEast(),_)._subtract(h),this.project(o.getNorthEast(),_)._subtract(h)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(o){return this.latLngToLayerPoint(o).subtract(this._getCenterLayerPoint())},_limitCenter:function(o,_,g){if(!g)return o;var h=this.project(o,_),P=this.getSize().divideBy(2),T=new Bounds(h.subtract(P),h.add(P)),C=this._getBoundsOffset(T,g,_);return C.round().equals([0,0])?o:this.unproject(h.add(C),_)},_limitOffset:function(o,_){if(!_)return o;var g=this.getPixelBounds(),h=new Bounds(g.min.add(o),g.max.add(o));return o.add(this._getBoundsOffset(h,_))},_getBoundsOffset:function(o,_,g){var h=toBounds(this.project(_.getNorthEast(),g),this.project(_.getSouthWest(),g)),P=h.min.subtract(o.min),T=h.max.subtract(o.max),C=this._rebound(P.x,-T.x),Z=this._rebound(P.y,-T.y);return new Point(C,Z)},_rebound:function(o,_){return 0<o+_?Math.round(o-_)/2:Math.max(0,Math.ceil(o))-Math.max(0,Math.floor(_))},_limitZoom:function(o){var _=this.getMinZoom(),g=this.getMaxZoom(),h=any3d?this.options.zoomSnap:1;return h&&(o=Math.round(o/h)*h),Math.max(_,Math.min(g,o))},_onPanTransitionStep:function(){this.fire('move')},_onPanTransitionEnd:function(){removeClass(this._mapPane,'leaflet-pan-anim'),this.fire('moveend')},_tryAnimatedPan:function(o,_){var g=this._getCenterOffset(o)._trunc();return(!0===(_&&_.animate)||this.getSize().contains(g))&&(this.panBy(g,_),!0)},_createAnimProxy:function(){var o=this._proxy=create$1('div','leaflet-proxy leaflet-zoom-animated');this._panes.mapPane.appendChild(o),this.on('zoomanim',function(_){var g=TRANSFORM,h=this._proxy.style[g];setTransform(this._proxy,this.project(_.center,_.zoom),this.getZoomScale(_.zoom,1)),h===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on('load moveend',function(){var _=this.getCenter(),g=this.getZoom();setTransform(this._proxy,this.project(_,g),this.getZoomScale(g,1))},this),this._on('unload',this._destroyAnimProxy,this)},_destroyAnimProxy:function(){remove(this._proxy),delete this._proxy},_catchTransitionEnd:function(o){this._animatingZoom&&0<=o.propertyName.indexOf('transform')&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName('leaflet-zoom-animated').length},_tryAnimatedZoom:function(o,_,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||!1===g.animate||this._nothingToAnimate()||Math.abs(_-this._zoom)>this.options.zoomAnimationThreshold)return!1;var h=this.getZoomScale(_),P=this._getCenterOffset(o)._divideBy(1-1/h);return(!0===g.animate||this.getSize().contains(P))&&(requestAnimFrame(function(){this._moveStart(!0,!1)._animateZoom(o,_,!0)},this),!0)},_animateZoom:function(o,_,g,h){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=o,this._animateToZoom=_,addClass(this._mapPane,'leaflet-zoom-anim')),this.fire('zoomanim',{center:o,zoom:_,noUpdate:h}),setTimeout(bind(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&removeClass(this._mapPane,'leaflet-zoom-anim'),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),requestAnimFrame(function(){this._moveEnd(!0)},this))}});function createMap(o,_){return new Map(o,_)}var Control=Class.extend({options:{position:'topright'},initialize:function(o){setOptions(this,o)},getPosition:function(){return this.options.position},setPosition:function(o){var _=this._map;return _&&_.removeControl(this),this.options.position=o,_&&_.addControl(this),this},getContainer:function(){return this._container},addTo:function(o){this.remove(),this._map=o;var _=this._container=this.onAdd(o),g=this.getPosition(),h=o._controlCorners[g];return addClass(_,'leaflet-control'),-1===g.indexOf('bottom')?h.appendChild(_):h.insertBefore(_,h.firstChild),this},remove:function(){return this._map?(remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(o){this._map&&o&&0<o.screenX&&0<o.screenY&&this._map.getContainer().focus()}}),control=function(o){return new Control(o)};Map.include({addControl:function(o){return o.addTo(this),this},removeControl:function(o){return o.remove(),this},_initControlPos:function(){function o(P,T){_[P+T]=create$1('div',g+P+' '+g+T,h)}var _=this._controlCorners={},g='leaflet-',h=this._controlContainer=create$1('div',g+'control-container',this._container);o('top','left'),o('top','right'),o('bottom','left'),o('bottom','right')},_clearControlPos:function(){for(var o in this._controlCorners)remove(this._controlCorners[o]);remove(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Layers=Control.extend({options:{collapsed:!0,position:'topright',autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(o,_,g,h){return g<h?-1:h<g?1:0}},initialize:function(o,_,g){for(var h in setOptions(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,o)this._addLayer(o[h],h);for(h in _)this._addLayer(_[h],h,!0)},onAdd:function(o){this._initLayout(),this._update(),this._map=o,o.on('zoomend',this._checkDisabledLayers,this);for(var _=0;_<this._layers.length;_++)this._layers[_].layer.on('add remove',this._onLayerChange,this);return this._container},addTo:function(o){return Control.prototype.addTo.call(this,o),this._expandIfNotCollapsed()},onRemove:function(){this._map.off('zoomend',this._checkDisabledLayers,this);for(var o=0;o<this._layers.length;o++)this._layers[o].layer.off('add remove',this._onLayerChange,this)},addBaseLayer:function(o,_){return this._addLayer(o,_),this._map?this._update():this},addOverlay:function(o,_){return this._addLayer(o,_,!0),this._map?this._update():this},removeLayer:function(o){o.off('add remove',this._onLayerChange,this);var _=this._getLayer(stamp(o));return _&&this._layers.splice(this._layers.indexOf(_),1),this._map?this._update():this},expand:function(){addClass(this._container,'leaflet-control-layers-expanded'),this._form.style.height=null;var o=this._map.getSize().y-(this._container.offsetTop+50);return o<this._form.clientHeight?(addClass(this._form,'leaflet-control-layers-scrollbar'),this._form.style.height=o+'px'):removeClass(this._form,'leaflet-control-layers-scrollbar'),this._checkDisabledLayers(),this},collapse:function(){return removeClass(this._container,'leaflet-control-layers-expanded'),this},_initLayout:function(){var o='leaflet-control-layers',_=this._container=create$1('div',o),g=this.options.collapsed;_.setAttribute('aria-haspopup',!0),disableClickPropagation(_),disableScrollPropagation(_);var h=this._form=create$1('form',o+'-list');g&&(this._map.on('click',this.collapse,this),!android&&on(_,{mouseenter:this.expand,mouseleave:this.collapse},this));var P=this._layersLink=create$1('a',o+'-toggle',_);P.href='#',P.title='Layers',touch?(on(P,'click',stop),on(P,'click',this.expand,this)):on(P,'focus',this.expand,this),g||this.expand(),this._baseLayersList=create$1('div',o+'-base',h),this._separator=create$1('div',o+'-separator',h),this._overlaysList=create$1('div',o+'-overlays',h),_.appendChild(h)},_getLayer:function(o){for(var _=0;_<this._layers.length;_++)if(this._layers[_]&&stamp(this._layers[_].layer)===o)return this._layers[_]},_addLayer:function(o,_,g){this._map&&o.on('add remove',this._onLayerChange,this),this._layers.push({layer:o,name:_,overlay:g}),this.options.sortLayers&&this._layers.sort(bind(function(h,P){return this.options.sortFunction(h.layer,P.layer,h.name,P.name)},this)),this.options.autoZIndex&&o.setZIndex&&(this._lastZIndex++,o.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;empty(this._baseLayersList),empty(this._overlaysList),this._layerControlInputs=[];var P=0,o,_,g,h;for(g=0;g<this._layers.length;g++)h=this._layers[g],this._addItem(h),_=_||h.overlay,o=o||!h.overlay,P+=h.overlay?0:1;return this.options.hideSingleBase&&(o=o&&1<P,this._baseLayersList.style.display=o?'':'none'),this._separator.style.display=_&&o?'':'none',this},_onLayerChange:function(o){this._handlingClick||this._update();var _=this._getLayer(stamp(o.target)),g=_.overlay?'add'===o.type?'overlayadd':'overlayremove':'add'===o.type?'baselayerchange':null;g&&this._map.fire(g,_)},_createRadioElement:function(o,_){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+o+'"'+(_?' checked="checked"':'')+'/>',h=document.createElement('div');return h.innerHTML=g,h.firstChild},_addItem:function(o){var _=document.createElement('label'),g=this._map.hasLayer(o.layer),h;o.overlay?(h=document.createElement('input'),h.type='checkbox',h.className='leaflet-control-layers-selector',h.defaultChecked=g):h=this._createRadioElement('leaflet-base-layers',g),this._layerControlInputs.push(h),h.layerId=stamp(o.layer),on(h,'click',this._onInputClick,this);var P=document.createElement('span');P.innerHTML=' '+o.name;var T=document.createElement('div');_.appendChild(T),T.appendChild(h),T.appendChild(P);var C=o.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(_),this._checkDisabledLayers(),_},_onInputClick:function(){var o=this._layerControlInputs,_,g,h=[],P=[];this._handlingClick=!0;for(var T=o.length-1;0<=T;T--)_=o[T],g=this._getLayer(_.layerId).layer,_.checked?h.push(g):!_.checked&&P.push(g);for(T=0;T<P.length;T++)this._map.hasLayer(P[T])&&this._map.removeLayer(P[T]);for(T=0;T<h.length;T++)this._map.hasLayer(h[T])||this._map.addLayer(h[T]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var o=this._layerControlInputs,h=this._map.getZoom(),P=o.length-1,_,g;0<=P;P--)_=o[P],g=this._getLayer(_.layerId).layer,_.disabled=void 0!==g.options.minZoom&&h<g.options.minZoom||void 0!==g.options.maxZoom&&h>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),layers=function(o,_,g){return new Layers(o,_,g)},Zoom=Control.extend({options:{position:'topleft',zoomInText:'+',zoomInTitle:'Zoom in',zoomOutText:'&#x2212;',zoomOutTitle:'Zoom out'},onAdd:function(o){var _='leaflet-control-zoom',g=create$1('div',_+' leaflet-bar'),h=this.options;return this._zoomInButton=this._createButton(h.zoomInText,h.zoomInTitle,_+'-in',g,this._zoomIn),this._zoomOutButton=this._createButton(h.zoomOutText,h.zoomOutTitle,_+'-out',g,this._zoomOut),this._updateDisabled(),o.on('zoomend zoomlevelschange',this._updateDisabled,this),g},onRemove:function(o){o.off('zoomend zoomlevelschange',this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(o){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(o.shiftKey?3:1))},_zoomOut:function(o){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(o.shiftKey?3:1))},_createButton:function(o,_,g,h,P){var T=create$1('a',g,h);return T.innerHTML=o,T.href='#',T.title=_,T.setAttribute('role','button'),T.setAttribute('aria-label',_),disableClickPropagation(T),on(T,'click',stop),on(T,'click',P,this),on(T,'click',this._refocusOnMap,this),T},_updateDisabled:function(){var o=this._map,_='leaflet-disabled';removeClass(this._zoomInButton,_),removeClass(this._zoomOutButton,_),(this._disabled||o._zoom===o.getMinZoom())&&addClass(this._zoomOutButton,_),(this._disabled||o._zoom===o.getMaxZoom())&&addClass(this._zoomInButton,_)}});Map.mergeOptions({zoomControl:!0}),Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zoom,this.addControl(this.zoomControl))});var zoom=function(o){return new Zoom(o)},Scale=Control.extend({options:{position:'bottomleft',maxWidth:100,metric:!0,imperial:!0},onAdd:function(o){var _='leaflet-control-scale',g=create$1('div',_),h=this.options;return this._addScales(h,_+'-line',g),o.on(h.updateWhenIdle?'moveend':'move',this._update,this),o.whenReady(this._update,this),g},onRemove:function(o){o.off(this.options.updateWhenIdle?'moveend':'move',this._update,this)},_addScales:function(o,_,g){o.metric&&(this._mScale=create$1('div',_,g)),o.imperial&&(this._iScale=create$1('div',_,g))},_update:function(){var o=this._map,_=o.getSize().y/2,g=o.distance(o.containerPointToLatLng([0,_]),o.containerPointToLatLng([this.options.maxWidth,_]));this._updateScales(g)},_updateScales:function(o){this.options.metric&&o&&this._updateMetric(o),this.options.imperial&&o&&this._updateImperial(o)},_updateMetric:function(o){var _=this._getRoundNum(o),g=1e3>_?_+' m':_/1e3+' km';this._updateScale(this._mScale,g,_/o)},_updateImperial:function(o){var _=3.2808399*o,g,h,P;5280<_?(g=_/5280,h=this._getRoundNum(g),this._updateScale(this._iScale,h+' mi',h/g)):(P=this._getRoundNum(_),this._updateScale(this._iScale,P+' ft',P/_))},_updateScale:function(o,_,g){o.style.width=Math.round(this.options.maxWidth*g)+'px',o.innerHTML=_},_getRoundNum:function(o){var _=Math.pow(10,(Math.floor(o)+'').length-1),g=o/_;return g=10<=g?10:5<=g?5:3<=g?3:2<=g?2:1,_*g}}),scale=function(o){return new Scale(o)},Attribution=Control.extend({options:{position:'bottomright',prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(o){setOptions(this,o),this._attributions={}},onAdd:function(o){for(var _ in o.attributionControl=this,this._container=create$1('div','leaflet-control-attribution'),disableClickPropagation(this._container),o._layers)o._layers[_].getAttribution&&this.addAttribution(o._layers[_].getAttribution());return this._update(),this._container},setPrefix:function(o){return this.options.prefix=o,this._update(),this},addAttribution:function(o){return o?(this._attributions[o]||(this._attributions[o]=0),this._attributions[o]++,this._update(),this):this},removeAttribution:function(o){return o?(this._attributions[o]&&(this._attributions[o]--,this._update()),this):this},_update:function(){if(this._map){var o=[];for(var _ in this._attributions)this._attributions[_]&&o.push(_);var g=[];this.options.prefix&&g.push(this.options.prefix),o.length&&g.push(o.join(', ')),this._container.innerHTML=g.join(' | ')}}});Map.mergeOptions({attributionControl:!0}),Map.addInitHook(function(){this.options.attributionControl&&new Attribution().addTo(this)});var attribution=function(o){return new Attribution(o)};Control.Layers=Layers,Control.Zoom=Zoom,Control.Scale=Scale,Control.Attribution=Attribution,control.layers=layers,control.zoom=zoom,control.scale=scale,control.attribution=attribution;var Handler=Class.extend({initialize:function(o){this._map=o},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Handler.addTo=function(o,_){return o.addHandler(_,this),this};var Mixin={Events:Events},START=touch?'touchstart mousedown':'mousedown',END={mousedown:'mouseup',touchstart:'touchend',pointerdown:'touchend',MSPointerDown:'touchend'},MOVE={mousedown:'mousemove',touchstart:'touchmove',pointerdown:'touchmove',MSPointerDown:'touchmove'},Draggable=Evented.extend({options:{clickTolerance:3},initialize:function(o,_,g,h){setOptions(this,h),this._element=o,this._dragStartTarget=_||o,this._preventOutline=g},enable:function(){this._enabled||(on(this._dragStartTarget,START,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Draggable._dragging===this&&this.finishDrag(),off(this._dragStartTarget,START,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(o){if(!o._simulated&&this._enabled&&(this._moved=!1,!hasClass(this._element,'leaflet-zoom-anim'))&&!(Draggable._dragging||o.shiftKey||1!==o.which&&1!==o.button&&!o.touches)&&(Draggable._dragging=this,this._preventOutline&&preventOutline(this._element),disableImageDrag(),disableTextSelection(),!this._moving)){this.fire('down');var _=o.touches?o.touches[0]:o,g=getSizedParentNode(this._element);this._startPoint=new Point(_.clientX,_.clientY),this._parentScale=getScale(g),on(document,MOVE[o.type],this._onMove,this),on(document,END[o.type],this._onUp,this)}},_onMove:function(o){if(!o._simulated&&this._enabled){if(o.touches&&1<o.touches.length)return void(this._moved=!0);var _=o.touches&&1===o.touches.length?o.touches[0]:o,g=new Point(_.clientX,_.clientY)._subtract(this._startPoint);(g.x||g.y)&&!(Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance)&&(g.x/=this._parentScale.x,g.y/=this._parentScale.y,preventDefault(o),!this._moved&&(this.fire('dragstart'),this._moved=!0,this._startPos=getPosition(this._element).subtract(g),addClass(document.body,'leaflet-dragging'),this._lastTarget=o.target||o.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),addClass(this._lastTarget,'leaflet-drag-target')),this._newPos=this._startPos.add(g),this._moving=!0,cancelAnimFrame(this._animRequest),this._lastEvent=o,this._animRequest=requestAnimFrame(this._updatePosition,this,!0))}},_updatePosition:function(){var o={originalEvent:this._lastEvent};this.fire('predrag',o),setPosition(this._element,this._newPos),this.fire('drag',o)},_onUp:function(o){o._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){for(var o in removeClass(document.body,'leaflet-dragging'),this._lastTarget&&(removeClass(this._lastTarget,'leaflet-drag-target'),this._lastTarget=null),MOVE)off(document,MOVE[o],this._onMove,this),off(document,END[o],this._onUp,this);enableImageDrag(),enableTextSelection(),this._moved&&this._moving&&(cancelAnimFrame(this._animRequest),this.fire('dragend',{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Draggable._dragging=!1}});function simplify(o,_){if(!_||!o.length)return o.slice();var g=_*_;return o=_reducePoints(o,g),o=_simplifyDP(o,g),o}function pointToSegmentDistance(o,_,g){return Math.sqrt(_sqClosestPointOnSegment(o,_,g,!0))}function closestPointOnSegment(o,_,g){return _sqClosestPointOnSegment(o,_,g)}function _simplifyDP(o,_){var g=o.length,h=typeof Uint8Array==void 0+''?Array:Uint8Array,P=new h(g);P[0]=P[g-1]=1,_simplifyDPStep(o,P,_,0,g-1);var C=[],T;for(T=0;T<g;T++)P[T]&&C.push(o[T]);return C}function _simplifyDPStep(o,_,g,h,P){var T=0,C,Z,E;for(Z=h+1;Z<=P-1;Z++)E=_sqClosestPointOnSegment(o[Z],o[h],o[P],!0),E>T&&(C=Z,T=E);T>g&&(_[C]=1,_simplifyDPStep(o,_,g,h,C),_simplifyDPStep(o,_,g,C,P))}function _reducePoints(o,_){for(var g=[o[0]],h=1,P=0,T=o.length;h<T;h++)_sqDist(o[h],o[P])>_&&(g.push(o[h]),P=h);return P<T-1&&g.push(o[T-1]),g}var _lastCode;function clipSegment(o,_,g,h,P){var T=h?_lastCode:_getBitCode(o,g),C=_getBitCode(_,g),Z,E,B;for(_lastCode=C;;){if(!(T|C))return[o,_];if(T&C)return!1;Z=T||C,E=_getEdgeIntersection(o,_,Z,g,P),B=_getBitCode(E,g),Z===T?(o=E,T=B):(_=E,C=B)}}function _getEdgeIntersection(o,_,g,h,P){var T=_.x-o.x,C=_.y-o.y,Z=h.min,E=h.max,B,A;return 8&g?(B=o.x+T*(E.y-o.y)/C,A=E.y):4&g?(B=o.x+T*(Z.y-o.y)/C,A=Z.y):2&g?(B=E.x,A=o.y+C*(E.x-o.x)/T):1&g&&(B=Z.x,A=o.y+C*(Z.x-o.x)/T),new Point(B,A,P)}function _getBitCode(o,_){var g=0;return o.x<_.min.x?g|=1:o.x>_.max.x&&(g|=2),o.y<_.min.y?g|=4:o.y>_.max.y&&(g|=8),g}function _sqDist(o,_){var g=_.x-o.x,h=_.y-o.y;return g*g+h*h}function _sqClosestPointOnSegment(o,_,g,h){var P=_.x,T=_.y,C=g.x-P,Z=g.y-T,E=C*C+Z*Z,B;return 0<E&&(B=((o.x-P)*C+(o.y-T)*Z)/E,1<B?(P=g.x,T=g.y):0<B&&(P+=C*B,T+=Z*B)),C=o.x-P,Z=o.y-T,h?C*C+Z*Z:new Point(P,T)}function isFlat(o){return!isArray(o[0])||'object'!=typeof o[0][0]&&'undefined'!=typeof o[0][0]}function _flat(o){return console.warn('Deprecated use of _flat, please use L.LineUtil.isFlat instead.'),isFlat(o)}var LineUtil=(Object.freeze||Object)({simplify:simplify,pointToSegmentDistance:pointToSegmentDistance,closestPointOnSegment:closestPointOnSegment,clipSegment:clipSegment,_getEdgeIntersection:_getEdgeIntersection,_getBitCode:_getBitCode,_sqClosestPointOnSegment:_sqClosestPointOnSegment,isFlat:isFlat,_flat:_flat});function clipPolygon(o,_,g){var P=[1,4,2,8],h,T,C,Z,E,B,A,I,O;for(T=0,A=o.length;T<A;T++)o[T]._code=_getBitCode(o[T],_);for(Z=0;4>Z;Z++){for(I=P[Z],h=[],(T=0,A=o.length,C=A-1);T<A;C=T++)E=o[T],B=o[C],E._code&I?!(B._code&I)&&(O=_getEdgeIntersection(B,E,I,_,g),O._code=_getBitCode(O,_),h.push(O)):(B._code&I&&(O=_getEdgeIntersection(B,E,I,_,g),O._code=_getBitCode(O,_),h.push(O)),h.push(E));o=h}return o}var PolyUtil=(Object.freeze||Object)({clipPolygon:clipPolygon}),LonLat={project:function(o){return new Point(o.lng,o.lat)},unproject:function(o){return new LatLng(o.y,o.x)},bounds:new Bounds([-180,-90],[180,90])},Mercator={R:6378137,R_MINOR:6356752.314245179,bounds:new Bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(o){var _=Math.PI/180,g=this.R,h=o.lat*_,P=this.R_MINOR/g,T=Math.sqrt(1-P*P),C=T*Math.sin(h),Z=Math.tan(Math.PI/4-h/2)/Math.pow((1-C)/(1+C),T/2);return h=-g*Math.log(Math.max(Z,1e-10)),new Point(o.lng*_*g,h)},unproject:function(o){for(var _=180/Math.PI,g=this.R,h=this.R_MINOR/g,P=Math.sqrt(1-h*h),T=Math.exp(-o.y/g),C=Math.PI/2-2*Math.atan(T),Z=0,E=0.1,B;15>Z&&1e-7<Math.abs(E);Z++)B=P*Math.sin(C),B=Math.pow((1-B)/(1+B),P/2),E=Math.PI/2-2*Math.atan(T*B)-C,C+=E;return new LatLng(C*_,o.x*_/g)}},index=(Object.freeze||Object)({LonLat:LonLat,Mercator:Mercator,SphericalMercator:SphericalMercator}),EPSG3395=extend({},Earth,{code:'EPSG:3395',projection:Mercator,transformation:function(){var o=0.5/(Math.PI*Mercator.R);return toTransformation(o,0.5,-o,0.5)}()}),EPSG4326=extend({},Earth,{code:'EPSG:4326',projection:LonLat,transformation:toTransformation(1/180,1,-1/180,0.5)}),Simple=extend({},CRS,{projection:LonLat,transformation:toTransformation(1,0,-1,0),scale:function(o){return Math.pow(2,o)},zoom:function(o){return Math.log(o)/Math.LN2},distance:function(o,_){var g=_.lng-o.lng,h=_.lat-o.lat;return Math.sqrt(g*g+h*h)},infinite:!0});CRS.Earth=Earth,CRS.EPSG3395=EPSG3395,CRS.EPSG3857=EPSG3857,CRS.EPSG900913=EPSG900913,CRS.EPSG4326=EPSG4326,CRS.Simple=Simple;var Layer=Evented.extend({options:{pane:'overlayPane',attribution:null,bubblingMouseEvents:!0},addTo:function(o){return o.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(o){return o&&o.removeLayer(this),this},getPane:function(o){return this._map.getPane(o?this.options[o]||o:this.options.pane)},addInteractiveTarget:function(o){return this._map._targets[stamp(o)]=this,this},removeInteractiveTarget:function(o){return delete this._map._targets[stamp(o)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(o){var _=o.target;if(_.hasLayer(this)){if(this._map=_,this._zoomAnimated=_._zoomAnimated,this.getEvents){var g=this.getEvents();_.on(g,this),this.once('remove',function(){_.off(g,this)},this)}this.onAdd(_),this.getAttribution&&_.attributionControl&&_.attributionControl.addAttribution(this.getAttribution()),this.fire('add'),_.fire('layeradd',{layer:this})}}});Map.include({addLayer:function(o){if(!o._layerAdd)throw new Error('The provided object is not a Layer.');var _=stamp(o);return this._layers[_]?this:(this._layers[_]=o,o._mapToAdd=this,o.beforeAdd&&o.beforeAdd(this),this.whenReady(o._layerAdd,o),this)},removeLayer:function(o){var _=stamp(o);return this._layers[_]?(this._loaded&&o.onRemove(this),o.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(o.getAttribution()),delete this._layers[_],this._loaded&&(this.fire('layerremove',{layer:o}),o.fire('remove')),o._map=o._mapToAdd=null,this):this},hasLayer:function(o){return!!o&&stamp(o)in this._layers},eachLayer:function(o,_){for(var g in this._layers)o.call(_,this._layers[g]);return this},_addLayers:function(o){o=o?isArray(o)?o:[o]:[];for(var _=0,g=o.length;_<g;_++)this.addLayer(o[_])},_addZoomLimit:function(o){(isNaN(o.options.maxZoom)||!isNaN(o.options.minZoom))&&(this._zoomBoundLayers[stamp(o)]=o,this._updateZoomLevels())},_removeZoomLimit:function(o){var _=stamp(o);this._zoomBoundLayers[_]&&(delete this._zoomBoundLayers[_],this._updateZoomLevels())},_updateZoomLevels:function(){var o=Infinity,_=-Infinity,g=this._getZoomSpan();for(var h in this._zoomBoundLayers){var P=this._zoomBoundLayers[h].options;o=P.minZoom===void 0?o:Math.min(o,P.minZoom),_=P.maxZoom===void 0?_:Math.max(_,P.maxZoom)}this._layersMaxZoom=_===-Infinity?void 0:_,this._layersMinZoom=o===Infinity?void 0:o,g!==this._getZoomSpan()&&this.fire('zoomlevelschange'),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var LayerGroup=Layer.extend({initialize:function(o,_){setOptions(this,_),this._layers={};var g,h;if(o)for(g=0,h=o.length;g<h;g++)this.addLayer(o[g])},addLayer:function(o){var _=this.getLayerId(o);return this._layers[_]=o,this._map&&this._map.addLayer(o),this},removeLayer:function(o){var _=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[_]&&this._map.removeLayer(this._layers[_]),delete this._layers[_],this},hasLayer:function(o){return!!o&&(o in this._layers||this.getLayerId(o)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(o){var _=Array.prototype.slice.call(arguments,1),g,h;for(g in this._layers)h=this._layers[g],h[o]&&h[o].apply(h,_);return this},onAdd:function(o){this.eachLayer(o.addLayer,o)},onRemove:function(o){this.eachLayer(o.removeLayer,o)},eachLayer:function(o,_){for(var g in this._layers)o.call(_,this._layers[g]);return this},getLayer:function(o){return this._layers[o]},getLayers:function(){var o=[];return this.eachLayer(o.push,o),o},setZIndex:function(o){return this.invoke('setZIndex',o)},getLayerId:function(o){return stamp(o)}}),layerGroup=function(o,_){return new LayerGroup(o,_)},FeatureGroup=LayerGroup.extend({addLayer:function(o){return this.hasLayer(o)?this:(o.addEventParent(this),LayerGroup.prototype.addLayer.call(this,o),this.fire('layeradd',{layer:o}))},removeLayer:function(o){return this.hasLayer(o)?(o in this._layers&&(o=this._layers[o]),o.removeEventParent(this),LayerGroup.prototype.removeLayer.call(this,o),this.fire('layerremove',{layer:o})):this},setStyle:function(o){return this.invoke('setStyle',o)},bringToFront:function(){return this.invoke('bringToFront')},bringToBack:function(){return this.invoke('bringToBack')},getBounds:function(){var o=new LatLngBounds;for(var _ in this._layers){var g=this._layers[_];o.extend(g.getBounds?g.getBounds():g.getLatLng())}return o}}),featureGroup=function(o){return new FeatureGroup(o)},Icon=Class.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(o){setOptions(this,o)},createIcon:function(o){return this._createIcon('icon',o)},createShadow:function(o){return this._createIcon('shadow',o)},_createIcon:function(o,_){var g=this._getIconUrl(o);if(!g){if('icon'===o)throw new Error('iconUrl not set in Icon options (see the docs).');return null}var h=this._createImg(g,_&&'IMG'===_.tagName?_:null);return this._setIconStyles(h,o),h},_setIconStyles:function(o,_){var g=this.options,h=g[_+'Size'];'number'==typeof h&&(h=[h,h]);var P=toPoint(h),T=toPoint('shadow'===_&&g.shadowAnchor||g.iconAnchor||P&&P.divideBy(2,!0));o.className='leaflet-marker-'+_+' '+(g.className||''),T&&(o.style.marginLeft=-T.x+'px',o.style.marginTop=-T.y+'px'),P&&(o.style.width=P.x+'px',o.style.height=P.y+'px')},_createImg:function(o,_){return _=_||document.createElement('img'),_.src=o,_},_getIconUrl:function(o){return retina&&this.options[o+'RetinaUrl']||this.options[o+'Url']}});function icon(o){return new Icon(o)}var IconDefault=Icon.extend({options:{iconUrl:'marker-icon.png',iconRetinaUrl:'marker-icon-2x.png',shadowUrl:'marker-shadow.png',iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(o){return IconDefault.imagePath||(IconDefault.imagePath=this._detectIconPath()),(this.options.imagePath||IconDefault.imagePath)+Icon.prototype._getIconUrl.call(this,o)},_detectIconPath:function(){var o=create$1('div','leaflet-default-icon-path',document.body),_=getStyle(o,'background-image')||getStyle(o,'backgroundImage');return document.body.removeChild(o),_=null===_||0!==_.indexOf('url')?'':_.replace(/^url\(["']?/,'').replace(/marker-icon\.png["']?\)$/,''),_}}),MarkerDrag=Handler.extend({initialize:function(o){this._marker=o},addHooks:function(){var o=this._marker._icon;this._draggable||(this._draggable=new Draggable(o,o,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),addClass(o,'leaflet-marker-draggable')},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&removeClass(this._marker._icon,'leaflet-marker-draggable')},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(o){var _=this._marker,g=_._map,h=this._marker.options.autoPanSpeed,P=this._marker.options.autoPanPadding,T=getPosition(_._icon),C=g.getPixelBounds(),Z=g.getPixelOrigin(),E=toBounds(C.min._subtract(Z).add(P),C.max._subtract(Z).subtract(P));if(!E.contains(T)){var B=toPoint((Math.max(E.max.x,T.x)-E.max.x)/(C.max.x-E.max.x)-(Math.min(E.min.x,T.x)-E.min.x)/(C.min.x-E.min.x),(Math.max(E.max.y,T.y)-E.max.y)/(C.max.y-E.max.y)-(Math.min(E.min.y,T.y)-E.min.y)/(C.min.y-E.min.y)).multiplyBy(h);g.panBy(B,{animate:!1}),this._draggable._newPos._add(B),this._draggable._startPos._add(B),setPosition(_._icon,this._draggable._newPos),this._onDrag(o),this._panRequest=requestAnimFrame(this._adjustPan.bind(this,o))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire('movestart').fire('dragstart')},_onPreDrag:function(o){this._marker.options.autoPan&&(cancelAnimFrame(this._panRequest),this._panRequest=requestAnimFrame(this._adjustPan.bind(this,o)))},_onDrag:function(o){var _=this._marker,g=_._shadow,h=getPosition(_._icon),P=_._map.layerPointToLatLng(h);g&&setPosition(g,h),_._latlng=P,o.latlng=P,o.oldLatLng=this._oldLatLng,_.fire('move',o).fire('drag',o)},_onDragEnd:function(o){cancelAnimFrame(this._panRequest),delete this._oldLatLng,this._marker.fire('moveend').fire('dragend',o)}}),Marker=Layer.extend({options:{icon:new IconDefault,interactive:!0,keyboard:!0,title:'',alt:'',zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:'markerPane',bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(o,_){setOptions(this,_),this._latlng=toLatLng(o)},onAdd:function(o){this._zoomAnimated=this._zoomAnimated&&o.options.markerZoomAnimation,this._zoomAnimated&&o.on('zoomanim',this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(o){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&o.off('zoomanim',this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(o){var _=this._latlng;return this._latlng=toLatLng(o),this.update(),this.fire('move',{oldLatLng:_,latlng:this._latlng})},setZIndexOffset:function(o){return this.options.zIndexOffset=o,this.update()},setIcon:function(o){return this.options.icon=o,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var o=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(o)}return this},_initIcon:function(){var o=this.options,_='leaflet-zoom-'+(this._zoomAnimated?'animated':'hide'),g=o.icon.createIcon(this._icon),h=!1;g!==this._icon&&(this._icon&&this._removeIcon(),h=!0,o.title&&(g.title=o.title),'IMG'===g.tagName&&(g.alt=o.alt||'')),addClass(g,_),o.keyboard&&(g.tabIndex='0'),this._icon=g,o.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var P=o.icon.createShadow(this._shadow),T=!1;P!==this._shadow&&(this._removeShadow(),T=!0),P&&(addClass(P,_),P.alt=''),this._shadow=P,1>o.opacity&&this._updateOpacity(),h&&this.getPane().appendChild(this._icon),this._initInteraction(),P&&T&&this.getPane('shadowPane').appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&remove(this._shadow),this._shadow=null},_setPos:function(o){setPosition(this._icon,o),this._shadow&&setPosition(this._shadow,o),this._zIndex=o.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(o){this._icon.style.zIndex=this._zIndex+o},_animateZoom:function(o){var _=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center).round();this._setPos(_)},_initInteraction:function(){if(this.options.interactive&&(addClass(this._icon,'leaflet-interactive'),this.addInteractiveTarget(this._icon),MarkerDrag)){var o=this.options.draggable;this.dragging&&(o=this.dragging.enabled(),this.dragging.disable()),this.dragging=new MarkerDrag(this),o&&this.dragging.enable()}},setOpacity:function(o){return this.options.opacity=o,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var o=this.options.opacity;setOpacity(this._icon,o),this._shadow&&setOpacity(this._shadow,o)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function marker(o,_){return new Marker(o,_)}var Path=Layer.extend({options:{stroke:!0,color:'#3388ff',weight:3,opacity:1,lineCap:'round',lineJoin:'round',dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:0.2,fillRule:'evenodd',interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(o){this._renderer=o.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(o){return setOptions(this,o),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),CircleMarker=Path.extend({options:{fill:!0,radius:10},initialize:function(o,_){setOptions(this,_),this._latlng=toLatLng(o),this._radius=this.options.radius},setLatLng:function(o){return this._latlng=toLatLng(o),this.redraw(),this.fire('move',{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(o){return this.options.radius=this._radius=o,this.redraw()},getRadius:function(){return this._radius},setStyle:function(o){var _=o&&o.radius||this._radius;return Path.prototype.setStyle.call(this,o),this.setRadius(_),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var o=this._radius,_=this._radiusY||o,g=this._clickTolerance(),h=[o+g,_+g];this._pxBounds=new Bounds(this._point.subtract(h),this._point.add(h))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(o){return o.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function circleMarker(o,_){return new CircleMarker(o,_)}var Circle=CircleMarker.extend({initialize:function(o,_,g){if('number'==typeof _&&(_=extend({},g,{radius:_})),setOptions(this,_),this._latlng=toLatLng(o),isNaN(this.options.radius))throw new Error('Circle radius cannot be NaN');this._mRadius=this.options.radius},setRadius:function(o){return this._mRadius=o,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var o=[this._radius,this._radiusY||this._radius];return new LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(o)),this._map.layerPointToLatLng(this._point.add(o)))},setStyle:Path.prototype.setStyle,_project:function(){var o=this._latlng.lng,_=this._latlng.lat,g=this._map,h=g.options.crs;if(h.distance===Earth.distance){var P=Math.PI/180,T=this._mRadius/Earth.R/P,C=g.project([_+T,o]),Z=g.project([_-T,o]),E=C.add(Z).divideBy(2),B=g.unproject(E).lat,A=Math.acos((Math.cos(T*P)-Math.sin(_*P)*Math.sin(B*P))/(Math.cos(_*P)*Math.cos(B*P)))/P;(isNaN(A)||0==A)&&(A=T/Math.cos(Math.PI/180*_)),this._point=E.subtract(g.getPixelOrigin()),this._radius=isNaN(A)?0:E.x-g.project([B,o-A]).x,this._radiusY=E.y-C.y}else{var I=h.unproject(h.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(I).x}this._updateBounds()}});function circle(o,_,g){return new Circle(o,_,g)}var Polyline=Path.extend({options:{smoothFactor:1,noClip:!1},initialize:function(o,_){setOptions(this,_),this._setLatLngs(o)},getLatLngs:function(){return this._latlngs},setLatLngs:function(o){return this._setLatLngs(o),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(o){for(var _=Infinity,g=null,h=_sqClosestPointOnSegment,C=0,Z=this._parts.length,P,T,E;C<Z;C++){E=this._parts[C];for(var B=1,A=E.length;B<A;B++){P=E[B-1],T=E[B];var I=h(o,P,T,!0);I<_&&(_=I,g=h(o,P,T))}}return g&&(g.distance=Math.sqrt(_)),g},getCenter:function(){if(!this._map)throw new Error('Must add layer to map before using getCenter()');var Z=this._rings[0],E=Z.length,o,_,g,h,P,T,C;if(!E)return null;for(o=0,_=0;o<E-1;o++)_+=Z[o].distanceTo(Z[o+1])/2;if(0===_)return this._map.layerPointToLatLng(Z[0]);for(o=0,h=0;o<E-1;o++)if(P=Z[o],T=Z[o+1],g=P.distanceTo(T),h+=g,h>_)return C=(h-_)/g,this._map.layerPointToLatLng([T.x-C*(T.x-P.x),T.y-C*(T.y-P.y)])},getBounds:function(){return this._bounds},addLatLng:function(o,_){return _=_||this._defaultShape(),o=toLatLng(o),_.push(o),this._bounds.extend(o),this.redraw()},_setLatLngs:function(o){this._bounds=new LatLngBounds,this._latlngs=this._convertLatLngs(o)},_defaultShape:function(){return isFlat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(o){for(var _=[],g=isFlat(o),h=0,P=o.length;h<P;h++)g?(_[h]=toLatLng(o[h]),this._bounds.extend(_[h])):_[h]=this._convertLatLngs(o[h]);return _},_project:function(){var o=new Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,o);var _=this._clickTolerance(),g=new Point(_,_);this._bounds.isValid()&&o.isValid()&&(o.min._subtract(g),o.max._add(g),this._pxBounds=o)},_projectLatlngs:function(o,_,g){var h=o[0]instanceof LatLng,P=o.length,T,C;if(h){for(C=[],T=0;T<P;T++)C[T]=this._map.latLngToLayerPoint(o[T]),g.extend(C[T]);_.push(C)}else for(T=0;T<P;T++)this._projectLatlngs(o[T],_,g)},_clipPoints:function(){var o=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(o)){if(this.options.noClip)return void(this._parts=this._rings);var _=this._parts,g,h,P,T,C,Z,E;for(g=0,P=0,T=this._rings.length;g<T;g++)for(E=this._rings[g],h=0,C=E.length;h<C-1;h++)(Z=clipSegment(E[h],E[h+1],o,h,!0),!!Z)&&(_[P]=_[P]||[],_[P].push(Z[0]),(Z[1]!==E[h+1]||h===C-2)&&(_[P].push(Z[1]),P++))}},_simplifyPoints:function(){for(var o=this._parts,_=this.options.smoothFactor,g=0,h=o.length;g<h;g++)o[g]=simplify(o[g],_)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(o,_){var E=this._clickTolerance(),g,h,P,T,C,Z;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(g=0,T=this._parts.length;g<T;g++)for(Z=this._parts[g],h=0,C=Z.length,P=C-1;h<C;P=h++)if((_||0!==h)&&pointToSegmentDistance(o,Z[P],Z[h])<=E)return!0;return!1}});function polyline(o,_){return new Polyline(o,_)}Polyline._flat=_flat;var Polygon=Polyline.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error('Must add layer to map before using getCenter()');var B=this._rings[0],A=B.length,o,_,g,h,P,T,C,Z,E;if(!A)return null;for(T=C=Z=0,o=0,_=A-1;o<A;_=o++)g=B[o],h=B[_],P=g.y*h.x-h.y*g.x,C+=(g.x+h.x)*P,Z+=(g.y+h.y)*P,T+=3*P;return E=0===T?B[0]:[C/T,Z/T],this._map.layerPointToLatLng(E)},_convertLatLngs:function(o){var _=Polyline.prototype._convertLatLngs.call(this,o),g=_.length;return 2<=g&&_[0]instanceof LatLng&&_[0].equals(_[g-1])&&_.pop(),_},_setLatLngs:function(o){Polyline.prototype._setLatLngs.call(this,o),isFlat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return isFlat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var o=this._renderer._bounds,_=this.options.weight,g=new Point(_,_);if(o=new Bounds(o.min.subtract(g),o.max.add(g)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(o)){if(this.options.noClip)return void(this._parts=this._rings);for(var h=0,P=this._rings.length,T;h<P;h++)T=clipPolygon(this._rings[h],o,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(o){var _=!1,g,h,P,T,C,Z,E,B;if(!this._pxBounds||!this._pxBounds.contains(o))return!1;for(T=0,E=this._parts.length;T<E;T++)for(g=this._parts[T],C=0,B=g.length,Z=B-1;C<B;Z=C++)h=g[C],P=g[Z],h.y>o.y!=P.y>o.y&&o.x<(P.x-h.x)*(o.y-h.y)/(P.y-h.y)+h.x&&(_=!_);return _||Polyline.prototype._containsPoint.call(this,o,!0)}});function polygon(o,_){return new Polygon(o,_)}var GeoJSON=FeatureGroup.extend({initialize:function(o,_){setOptions(this,_),this._layers={},o&&this.addData(o)},addData:function(o){var _=isArray(o)?o:o.features,g,h,P;if(_){for(g=0,h=_.length;g<h;g++)P=_[g],(P.geometries||P.geometry||P.features||P.coordinates)&&this.addData(P);return this}var T=this.options;if(T.filter&&!T.filter(o))return this;var C=geometryToLayer(o,T);return C?(C.feature=asFeature(o),C.defaultOptions=C.options,this.resetStyle(C),T.onEachFeature&&T.onEachFeature(o,C),this.addLayer(C)):this},resetStyle:function(o){return o.options=extend({},o.defaultOptions),this._setLayerStyle(o,this.options.style),this},setStyle:function(o){return this.eachLayer(function(_){this._setLayerStyle(_,o)},this)},_setLayerStyle:function(o,_){'function'==typeof _&&(_=_(o.feature)),o.setStyle&&o.setStyle(_)}});function geometryToLayer(o,_){var g='Feature'===o.type?o.geometry:o,h=g?g.coordinates:null,P=[],T=_&&_.pointToLayer,C=_&&_.coordsToLatLng||coordsToLatLng,Z,E,B,A;if(!h&&!g)return null;switch(g.type){case'Point':return Z=C(h),T?T(o,Z):new Marker(Z);case'MultiPoint':for(B=0,A=h.length;B<A;B++)Z=C(h[B]),P.push(T?T(o,Z):new Marker(Z));return new FeatureGroup(P);case'LineString':case'MultiLineString':return E=coordsToLatLngs(h,'LineString'===g.type?0:1,C),new Polyline(E,_);case'Polygon':case'MultiPolygon':return E=coordsToLatLngs(h,'Polygon'===g.type?1:2,C),new Polygon(E,_);case'GeometryCollection':for(B=0,A=g.geometries.length;B<A;B++){var I=geometryToLayer({geometry:g.geometries[B],type:'Feature',properties:o.properties},_);I&&P.push(I)}return new FeatureGroup(P);default:throw new Error('Invalid GeoJSON object.');}}function coordsToLatLng(o){return new LatLng(o[1],o[0],o[2])}function coordsToLatLngs(o,_,g){for(var h=[],P=0,T=o.length,C;P<T;P++)C=_?coordsToLatLngs(o[P],_-1,g):(g||coordsToLatLng)(o[P]),h.push(C);return h}function latLngToCoords(o,_){return _='number'==typeof _?_:6,void 0===o.alt?[formatNum(o.lng,_),formatNum(o.lat,_)]:[formatNum(o.lng,_),formatNum(o.lat,_),formatNum(o.alt,_)]}function latLngsToCoords(o,_,g,h){for(var P=[],T=0,C=o.length;T<C;T++)P.push(_?latLngsToCoords(o[T],_-1,g,h):latLngToCoords(o[T],h));return!_&&g&&P.push(P[0]),P}function getFeature(o,_){return o.feature?extend({},o.feature,{geometry:_}):asFeature(_)}function asFeature(o){return'Feature'===o.type||'FeatureCollection'===o.type?o:{type:'Feature',properties:{},geometry:o}}var PointToGeoJSON={toGeoJSON:function(o){return getFeature(this,{type:'Point',coordinates:latLngToCoords(this.getLatLng(),o)})}};Marker.include(PointToGeoJSON),Circle.include(PointToGeoJSON),CircleMarker.include(PointToGeoJSON),Polyline.include({toGeoJSON:function(o){var _=!isFlat(this._latlngs),g=latLngsToCoords(this._latlngs,_?1:0,!1,o);return getFeature(this,{type:(_?'Multi':'')+'LineString',coordinates:g})}}),Polygon.include({toGeoJSON:function(o){var _=!isFlat(this._latlngs),g=_&&!isFlat(this._latlngs[0]),h=latLngsToCoords(this._latlngs,g?2:_?1:0,!0,o);return _||(h=[h]),getFeature(this,{type:(g?'Multi':'')+'Polygon',coordinates:h})}}),LayerGroup.include({toMultiPoint:function(o){var _=[];return this.eachLayer(function(g){_.push(g.toGeoJSON(o).geometry.coordinates)}),getFeature(this,{type:'MultiPoint',coordinates:_})},toGeoJSON:function(o){var _=this.feature&&this.feature.geometry&&this.feature.geometry.type;if('MultiPoint'===_)return this.toMultiPoint(o);var g='GeometryCollection'===_,h=[];return this.eachLayer(function(P){if(P.toGeoJSON){var T=P.toGeoJSON(o);if(g)h.push(T.geometry);else{var C=asFeature(T);'FeatureCollection'===C.type?h.push.apply(h,C.features):h.push(C)}}}),g?getFeature(this,{geometries:h,type:'GeometryCollection'}):{type:'FeatureCollection',features:h}}});function geoJSON(o,_){return new GeoJSON(o,_)}var geoJson=geoJSON,ImageOverlay=Layer.extend({options:{opacity:1,alt:'',interactive:!1,crossOrigin:!1,errorOverlayUrl:'',zIndex:1,className:''},initialize:function(o,_,g){this._url=o,this._bounds=toLatLngBounds(_),setOptions(this,g)},onAdd:function(){this._image||(this._initImage(),1>this.options.opacity&&this._updateOpacity()),this.options.interactive&&(addClass(this._image,'leaflet-interactive'),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(o){return this.options.opacity=o,this._image&&this._updateOpacity(),this},setStyle:function(o){return o.opacity&&this.setOpacity(o.opacity),this},bringToFront:function(){return this._map&&toFront(this._image),this},bringToBack:function(){return this._map&&toBack(this._image),this},setUrl:function(o){return this._url=o,this._image&&(this._image.src=o),this},setBounds:function(o){return this._bounds=toLatLngBounds(o),this._map&&this._reset(),this},getEvents:function(){var o={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var o='IMG'===this._url.tagName,_=this._image=o?this._url:create$1('img');return addClass(_,'leaflet-image-layer'),this._zoomAnimated&&addClass(_,'leaflet-zoom-animated'),this.options.className&&addClass(_,this.options.className),_.onselectstart=falseFn,_.onmousemove=falseFn,_.onload=bind(this.fire,this,'load'),_.onerror=bind(this._overlayOnError,this,'error'),(this.options.crossOrigin||''===this.options.crossOrigin)&&(_.crossOrigin=!0===this.options.crossOrigin?'':this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),o?void(this._url=_.src):void(_.src=this._url,_.alt=this.options.alt)},_animateZoom:function(o){var _=this._map.getZoomScale(o.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,o.zoom,o.center).min;setTransform(this._image,g,_)},_reset:function(){var o=this._image,_=new Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=_.getSize();setPosition(o,_.min),o.style.width=g.x+'px',o.style.height=g.y+'px'},_updateOpacity:function(){setOpacity(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire('error');var o=this.options.errorOverlayUrl;o&&this._url!==o&&(this._url=o,this._image.src=o)}}),imageOverlay=function(o,_,g){return new ImageOverlay(o,_,g)},VideoOverlay=ImageOverlay.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var o='VIDEO'===this._url.tagName,_=this._image=o?this._url:create$1('video');if(addClass(_,'leaflet-image-layer'),this._zoomAnimated&&addClass(_,'leaflet-zoom-animated'),_.onselectstart=falseFn,_.onmousemove=falseFn,_.onloadeddata=bind(this.fire,this,'load'),o){for(var g=_.getElementsByTagName('source'),h=[],P=0;P<g.length;P++)h.push(g[P].src);return void(this._url=0<g.length?h:[_.src])}isArray(this._url)||(this._url=[this._url]),_.autoplay=!!this.options.autoplay,_.loop=!!this.options.loop;for(var T=0,C;T<this._url.length;T++)C=create$1('source'),C.src=this._url[T],_.appendChild(C)}});function videoOverlay(o,_,g){return new VideoOverlay(o,_,g)}var DivOverlay=Layer.extend({options:{offset:[0,7],className:'',pane:'popupPane'},initialize:function(o,_){setOptions(this,o),this._source=_},onAdd:function(o){this._zoomAnimated=o._zoomAnimated,this._container||this._initLayout(),o._fadeAnimated&&setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),o._fadeAnimated&&setOpacity(this._container,1),this.bringToFront()},onRemove:function(o){o._fadeAnimated?(setOpacity(this._container,0),this._removeTimeout=setTimeout(bind(remove,void 0,this._container),200)):remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(o){return this._latlng=toLatLng(o),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(o){return this._content=o,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility='hidden',this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility='',this._adjustPan())},getEvents:function(){var o={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&toFront(this._container),this},bringToBack:function(){return this._map&&toBack(this._container),this},_updateContent:function(){if(this._content){var o=this._contentNode,_='function'==typeof this._content?this._content(this._source||this):this._content;if('string'==typeof _)o.innerHTML=_;else{for(;o.hasChildNodes();)o.removeChild(o.firstChild);o.appendChild(_)}this.fire('contentupdate')}},_updatePosition:function(){if(this._map){var o=this._map.latLngToLayerPoint(this._latlng),_=toPoint(this.options.offset),g=this._getAnchor();this._zoomAnimated?setPosition(this._container,o.add(g)):_=_.add(o).add(g);var h=this._containerBottom=-_.y,P=this._containerLeft=-Math.round(this._containerWidth/2)+_.x;this._container.style.bottom=h+'px',this._container.style.left=P+'px'}},_getAnchor:function(){return[0,0]}}),Popup=DivOverlay.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:''},openOn:function(o){return o.openPopup(this),this},onAdd:function(o){DivOverlay.prototype.onAdd.call(this,o),o.fire('popupopen',{popup:this}),this._source&&(this._source.fire('popupopen',{popup:this},!0),!(this._source instanceof Path)&&this._source.on('preclick',stopPropagation))},onRemove:function(o){DivOverlay.prototype.onRemove.call(this,o),o.fire('popupclose',{popup:this}),this._source&&(this._source.fire('popupclose',{popup:this},!0),!(this._source instanceof Path)&&this._source.off('preclick',stopPropagation))},getEvents:function(){var o=DivOverlay.prototype.getEvents.call(this);return(void 0===this.options.closeOnClick?this._map.options.closePopupOnClick:this.options.closeOnClick)&&(o.preclick=this._close),this.options.keepInView&&(o.moveend=this._adjustPan),o},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var o='leaflet-popup',_=this._container=create$1('div',o+' '+(this.options.className||'')+' leaflet-zoom-animated'),g=this._wrapper=create$1('div',o+'-content-wrapper',_);if(this._contentNode=create$1('div',o+'-content',g),disableClickPropagation(g),disableScrollPropagation(this._contentNode),on(g,'contextmenu',stopPropagation),this._tipContainer=create$1('div',o+'-tip-container',_),this._tip=create$1('div',o+'-tip',this._tipContainer),this.options.closeButton){var h=this._closeButton=create$1('a',o+'-close-button',_);h.href='#close',h.innerHTML='&#215;',on(h,'click',this._onCloseButtonClick,this)}},_updateLayout:function(){var o=this._contentNode,_=o.style;_.width='',_.whiteSpace='nowrap';var g=o.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),_.width=g+1+'px',_.whiteSpace='',_.height='';var h=o.offsetHeight,P=this.options.maxHeight,T='leaflet-popup-scrolled';P&&h>P?(_.height=P+'px',addClass(o,T)):removeClass(o,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(o){var _=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center),g=this._getAnchor();setPosition(this._container,_.add(g))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var o=this._map,_=parseInt(getStyle(this._container,'marginBottom'),10)||0,g=this._container.offsetHeight+_,h=this._containerWidth,P=new Point(this._containerLeft,-g-this._containerBottom);P._add(getPosition(this._container));var T=o.layerPointToContainerPoint(P),C=toPoint(this.options.autoPanPadding),Z=toPoint(this.options.autoPanPaddingTopLeft||C),E=toPoint(this.options.autoPanPaddingBottomRight||C),B=o.getSize(),A=0,I=0;T.x+h+E.x>B.x&&(A=T.x+h-B.x+E.x),0>T.x-A-Z.x&&(A=T.x-Z.x),T.y+g+E.y>B.y&&(I=T.y+g-B.y+E.y),0>T.y-I-Z.y&&(I=T.y-Z.y),(A||I)&&o.fire('autopanstart').panBy([A,I])}},_onCloseButtonClick:function(o){this._close(),stop(o)},_getAnchor:function(){return toPoint(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),popup=function(o,_){return new Popup(o,_)};Map.mergeOptions({closePopupOnClick:!0}),Map.include({openPopup:function(o,_,g){return(o instanceof Popup||(o=new Popup(g).setContent(o)),_&&o.setLatLng(_),this.hasLayer(o))?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=o,this.addLayer(o))},closePopup:function(o){return o&&o!==this._popup||(o=this._popup,this._popup=null),o&&this.removeLayer(o),this}}),Layer.include({bindPopup:function(o,_){return o instanceof Popup?(setOptions(o,_),this._popup=o,o._source=this):((!this._popup||_)&&(this._popup=new Popup(_,this)),this._popup.setContent(o)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(o,_){if(o instanceof Layer||(_=o,o=this),o instanceof FeatureGroup)for(var g in this._layers){o=this._layers[g];break}return _||(_=o.getCenter?o.getCenter():o.getLatLng()),this._popup&&this._map&&(this._popup._source=o,this._popup.update(),this._map.openPopup(this._popup,_)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(o){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(o)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(o){return this._popup&&this._popup.setContent(o),this},getPopup:function(){return this._popup},_openPopup:function(o){var _=o.layer||o.target;if(this._popup)return this._map?(stop(o),_ instanceof Path?void this.openPopup(o.layer||o.target,o.latlng):void(this._map.hasLayer(this._popup)&&this._popup._source===_?this.closePopup():this.openPopup(_,o.latlng))):void 0},_movePopup:function(o){this._popup.setLatLng(o.latlng)},_onKeyPress:function(o){13===o.originalEvent.keyCode&&this._openPopup(o)}});var Tooltip=DivOverlay.extend({options:{pane:'tooltipPane',offset:[0,0],direction:'auto',permanent:!1,sticky:!1,interactive:!1,opacity:0.9},onAdd:function(o){DivOverlay.prototype.onAdd.call(this,o),this.setOpacity(this.options.opacity),o.fire('tooltipopen',{tooltip:this}),this._source&&this._source.fire('tooltipopen',{tooltip:this},!0)},onRemove:function(o){DivOverlay.prototype.onRemove.call(this,o),o.fire('tooltipclose',{tooltip:this}),this._source&&this._source.fire('tooltipclose',{tooltip:this},!0)},getEvents:function(){var o=DivOverlay.prototype.getEvents.call(this);return touch&&!this.options.permanent&&(o.preclick=this._close),o},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var _='leaflet-tooltip'+' '+(this.options.className||'')+' leaflet-zoom-'+(this._zoomAnimated?'animated':'hide');this._contentNode=this._container=create$1('div',_)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(o){var _=this._map,g=this._container,h=_.latLngToContainerPoint(_.getCenter()),P=_.layerPointToContainerPoint(o),T=this.options.direction,C=g.offsetWidth,Z=g.offsetHeight,E=toPoint(this.options.offset),B=this._getAnchor();'top'===T?o=o.add(toPoint(-C/2+E.x,-Z+E.y+B.y,!0)):'bottom'===T?o=o.subtract(toPoint(C/2-E.x,-E.y,!0)):'center'===T?o=o.subtract(toPoint(C/2+E.x,Z/2-B.y+E.y,!0)):'right'===T||'auto'===T&&P.x<h.x?(T='right',o=o.add(toPoint(E.x+B.x,B.y-Z/2+E.y,!0))):(T='left',o=o.subtract(toPoint(C+B.x-E.x,Z/2-B.y-E.y,!0))),removeClass(g,'leaflet-tooltip-right'),removeClass(g,'leaflet-tooltip-left'),removeClass(g,'leaflet-tooltip-top'),removeClass(g,'leaflet-tooltip-bottom'),addClass(g,'leaflet-tooltip-'+T),setPosition(g,o)},_updatePosition:function(){var o=this._map.latLngToLayerPoint(this._latlng);this._setPosition(o)},setOpacity:function(o){this.options.opacity=o,this._container&&setOpacity(this._container,o)},_animateZoom:function(o){var _=this._map._latLngToNewLayerPoint(this._latlng,o.zoom,o.center);this._setPosition(_)},_getAnchor:function(){return toPoint(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),tooltip=function(o,_){return new Tooltip(o,_)};Map.include({openTooltip:function(o,_,g){return o instanceof Tooltip||(o=new Tooltip(g).setContent(o)),_&&o.setLatLng(_),this.hasLayer(o)?this:this.addLayer(o)},closeTooltip:function(o){return o&&this.removeLayer(o),this}}),Layer.include({bindTooltip:function(o,_){return o instanceof Tooltip?(setOptions(o,_),this._tooltip=o,o._source=this):((!this._tooltip||_)&&(this._tooltip=new Tooltip(_,this)),this._tooltip.setContent(o)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(o){if(o||!this._tooltipHandlersAdded){var _=o?'off':'on',g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),touch&&(g.click=this._openTooltip)),this[_](g),this._tooltipHandlersAdded=!o}},openTooltip:function(o,_){if(o instanceof Layer||(_=o,o=this),o instanceof FeatureGroup)for(var g in this._layers){o=this._layers[g];break}return _||(_=o.getCenter?o.getCenter():o.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=o,this._tooltip.update(),this._map.openTooltip(this._tooltip,_),this._tooltip.options.interactive&&this._tooltip._container&&(addClass(this._tooltip._container,'leaflet-clickable'),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(removeClass(this._tooltip._container,'leaflet-clickable'),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(o){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(o)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(o){return this._tooltip&&this._tooltip.setContent(o),this},getTooltip:function(){return this._tooltip},_openTooltip:function(o){var _=o.layer||o.target;this._tooltip&&this._map&&this.openTooltip(_,this._tooltip.options.sticky?o.latlng:void 0)},_moveTooltip:function(o){var _=o.latlng,g,h;this._tooltip.options.sticky&&o.originalEvent&&(g=this._map.mouseEventToContainerPoint(o.originalEvent),h=this._map.containerPointToLayerPoint(g),_=this._map.layerPointToLatLng(h)),this._tooltip.setLatLng(_)}});var DivIcon=Icon.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:'leaflet-div-icon'},createIcon:function(o){var _=o&&'DIV'===o.tagName?o:document.createElement('div'),g=this.options;if(_.innerHTML=!1===g.html?'':g.html,g.bgPos){var h=toPoint(g.bgPos);_.style.backgroundPosition=-h.x+'px '+-h.y+'px'}return this._setIconStyles(_,'icon'),_},createShadow:function(){return null}});function divIcon(o){return new DivIcon(o)}Icon.Default=IconDefault;var GridLayer=Layer.extend({options:{tileSize:256,opacity:1,updateWhenIdle:mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:'tilePane',className:'',keepBuffer:2},initialize:function(o){setOptions(this,o)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(o){o._addZoomLimit(this)},onRemove:function(o){this._removeAllTiles(),remove(this._container),o._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(o){return this.options.opacity=o,this._updateOpacity(),this},setZIndex:function(o){return this.options.zIndex=o,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var o={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(!this._onMove&&(this._onMove=throttle(this._onMoveEnd,this.options.updateInterval,this)),o.move=this._onMove),this._zoomAnimated&&(o.zoomanim=this._animateZoom),o},createTile:function(){return document.createElement('div')},getTileSize:function(){var o=this.options.tileSize;return o instanceof Point?o:new Point(o,o)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(o){for(var _=this.getPane().children,g=-o(-Infinity,Infinity),h=0,P=_.length,T;h<P;h++)T=_[h].style.zIndex,_[h]!==this._container&&T&&(g=o(g,+T));isFinite(g)&&(this.options.zIndex=g+o(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ielt9){setOpacity(this._container,this.options.opacity);var o=+new Date,_=!1,g=!1;for(var h in this._tiles){var P=this._tiles[h];if(P.current&&P.loaded){var T=Math.min(1,(o-P.loaded)/200);setOpacity(P.el,T),1>T?_=!0:(P.active?g=!0:this._onOpaqueTile(P),P.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),_&&(cancelAnimFrame(this._fadeFrame),this._fadeFrame=requestAnimFrame(this._updateOpacity,this))}},_onOpaqueTile:falseFn,_initContainer:function(){this._container||(this._container=create$1('div','leaflet-layer '+(this.options.className||'')),this._updateZIndex(),1>this.options.opacity&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var o=this._tileZoom,_=this.options.maxZoom;if(void 0!==o){for(var g in this._levels)this._levels[g].el.children.length||g===o?(this._levels[g].el.style.zIndex=_-Math.abs(o-g),this._onUpdateLevel(g)):(remove(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var h=this._levels[o],P=this._map;return h||(h=this._levels[o]={},h.el=create$1('div','leaflet-tile-container leaflet-zoom-animated',this._container),h.el.style.zIndex=_,h.origin=P.project(P.unproject(P.getPixelOrigin()),o).round(),h.zoom=o,this._setZoomTransform(h,P.getCenter(),P.getZoom()),falseFn(h.el.offsetWidth),this._onCreateLevel(h)),this._level=h,h}},_onUpdateLevel:falseFn,_onRemoveLevel:falseFn,_onCreateLevel:falseFn,_pruneTiles:function(){if(this._map){var g=this._map.getZoom(),o,_;if(g>this.options.maxZoom||g<this.options.minZoom)return void this._removeAllTiles();for(o in this._tiles)_=this._tiles[o],_.retain=_.current;for(o in this._tiles)if(_=this._tiles[o],_.current&&!_.active){var h=_.coords;this._retainParent(h.x,h.y,h.z,h.z-5)||this._retainChildren(h.x,h.y,h.z,h.z+2)}for(o in this._tiles)this._tiles[o].retain||this._removeTile(o)}},_removeTilesAtZoom:function(o){for(var _ in this._tiles)this._tiles[_].coords.z===o&&this._removeTile(_)},_removeAllTiles:function(){for(var o in this._tiles)this._removeTile(o)},_invalidateAll:function(){for(var o in this._levels)remove(this._levels[o].el),this._onRemoveLevel(o),delete this._levels[o];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(o,_,g,h){var P=Math.floor(o/2),T=Math.floor(_/2),C=g-1,Z=new Point(+P,+T);Z.z=+C;var E=this._tileCoordsToKey(Z),B=this._tiles[E];return B&&B.active?(B.retain=!0,!0):(B&&B.loaded&&(B.retain=!0),!!(C>h)&&this._retainParent(P,T,C,h))},_retainChildren:function(o,_,g,h){for(var P=2*o;P<2*o+2;P++)for(var T=2*_,C;T<2*_+2;T++){C=new Point(P,T),C.z=g+1;var Z=this._tileCoordsToKey(C),E=this._tiles[Z];if(E&&E.active){E.retain=!0;continue}else E&&E.loaded&&(E.retain=!0);g+1<h&&this._retainChildren(P,T,g+1,h)}},_resetView:function(o){var _=o&&(o.pinch||o.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),_,_)},_animateZoom:function(o){this._setView(o.center,o.zoom,!0,o.noUpdate)},_clampZoom:function(o){var _=this.options;return void 0!==_.minNativeZoom&&o<_.minNativeZoom?_.minNativeZoom:void 0!==_.maxNativeZoom&&_.maxNativeZoom<o?_.maxNativeZoom:o},_setView:function(o,_,g,h){var P=this._clampZoom(Math.round(_));(this.options.maxZoom!==void 0&&P>this.options.maxZoom||this.options.minZoom!==void 0&&P<this.options.minZoom)&&(P=void 0);var T=this.options.updateWhenZooming&&P!==this._tileZoom;(!h||T)&&(this._tileZoom=P,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),P!==void 0&&this._update(o),!g&&this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(o,_)},_setZoomTransforms:function(o,_){for(var g in this._levels)this._setZoomTransform(this._levels[g],o,_)},_setZoomTransform:function(o,_,g){var h=this._map.getZoomScale(g,o.zoom),P=o.origin.multiplyBy(h).subtract(this._map._getNewPixelOrigin(_,g)).round();any3d?setTransform(o.el,P,h):setPosition(o.el,P)},_resetGrid:function(){var o=this._map,_=o.options.crs,g=this._tileSize=this.getTileSize(),h=this._tileZoom,P=this._map.getPixelWorldBounds(this._tileZoom);P&&(this._globalTileRange=this._pxBoundsToTileRange(P)),this._wrapX=_.wrapLng&&!this.options.noWrap&&[Math.floor(o.project([0,_.wrapLng[0]],h).x/g.x),Math.ceil(o.project([0,_.wrapLng[1]],h).x/g.y)],this._wrapY=_.wrapLat&&!this.options.noWrap&&[Math.floor(o.project([_.wrapLat[0],0],h).y/g.x),Math.ceil(o.project([_.wrapLat[1],0],h).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(o){var _=this._map,g=_._animatingZoom?Math.max(_._animateToZoom,_.getZoom()):_.getZoom(),h=_.getZoomScale(g,this._tileZoom),P=_.project(o,this._tileZoom).floor(),T=_.getSize().divideBy(2*h);return new Bounds(P.subtract(T),P.add(T))},_update:function(o){var _=this._map;if(_){var g=this._clampZoom(_.getZoom());if(void 0===o&&(o=_.getCenter()),void 0!==this._tileZoom){var h=this._getTiledPixelBounds(o),P=this._pxBoundsToTileRange(h),T=P.getCenter(),C=[],Z=this.options.keepBuffer,E=new Bounds(P.getBottomLeft().subtract([Z,-Z]),P.getTopRight().add([Z,-Z]));if(!(isFinite(P.min.x)&&isFinite(P.min.y)&&isFinite(P.max.x)&&isFinite(P.max.y)))throw new Error('Attempted to load an infinite number of tiles');for(var B in this._tiles){var A=this._tiles[B].coords;A.z===this._tileZoom&&E.contains(new Point(A.x,A.y))||(this._tiles[B].current=!1)}if(1<Math.abs(g-this._tileZoom))return void this._setView(o,g);for(var I=P.min.y;I<=P.max.y;I++)for(var O=P.min.x,M;O<=P.max.x;O++)if(M=new Point(O,I),M.z=this._tileZoom,!!this._isValidTile(M)){var R=this._tiles[this._tileCoordsToKey(M)];R?R.current=!0:C.push(M)}if(C.sort(function(D,W){return D.distanceTo(T)-W.distanceTo(T)}),0!==C.length){this._loading||(this._loading=!0,this.fire('loading'));var N=document.createDocumentFragment();for(O=0;O<C.length;O++)this._addTile(C[O],N);this._level.el.appendChild(N)}}}},_isValidTile:function(o){var _=this._map.options.crs;if(!_.infinite){var g=this._globalTileRange;if(!_.wrapLng&&(o.x<g.min.x||o.x>g.max.x)||!_.wrapLat&&(o.y<g.min.y||o.y>g.max.y))return!1}if(!this.options.bounds)return!0;var h=this._tileCoordsToBounds(o);return toLatLngBounds(this.options.bounds).overlaps(h)},_keyToBounds:function(o){return this._tileCoordsToBounds(this._keyToTileCoords(o))},_tileCoordsToNwSe:function(o){var _=this._map,g=this.getTileSize(),h=o.scaleBy(g),P=h.add(g),T=_.unproject(h,o.z),C=_.unproject(P,o.z);return[T,C]},_tileCoordsToBounds:function(o){var _=this._tileCoordsToNwSe(o),g=new LatLngBounds(_[0],_[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(o){return o.x+':'+o.y+':'+o.z},_keyToTileCoords:function(o){var _=o.split(':'),g=new Point(+_[0],+_[1]);return g.z=+_[2],g},_removeTile:function(o){var _=this._tiles[o];_&&(remove(_.el),delete this._tiles[o],this.fire('tileunload',{tile:_.el,coords:this._keyToTileCoords(o)}))},_initTile:function(o){addClass(o,'leaflet-tile');var _=this.getTileSize();o.style.width=_.x+'px',o.style.height=_.y+'px',o.onselectstart=falseFn,o.onmousemove=falseFn,ielt9&&1>this.options.opacity&&setOpacity(o,this.options.opacity),android&&!android23&&(o.style.WebkitBackfaceVisibility='hidden')},_addTile:function(o,_){var g=this._getTilePos(o),h=this._tileCoordsToKey(o),P=this.createTile(this._wrapCoords(o),bind(this._tileReady,this,o));this._initTile(P),2>this.createTile.length&&requestAnimFrame(bind(this._tileReady,this,o,null,P)),setPosition(P,g),this._tiles[h]={el:P,coords:o,current:!0},_.appendChild(P),this.fire('tileloadstart',{tile:P,coords:o})},_tileReady:function(o,_,g){_&&this.fire('tileerror',{error:_,tile:g,coords:o});var h=this._tileCoordsToKey(o);g=this._tiles[h];g&&(g.loaded=+new Date,this._map._fadeAnimated?(setOpacity(g.el,0),cancelAnimFrame(this._fadeFrame),this._fadeFrame=requestAnimFrame(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),!_&&(addClass(g.el,'leaflet-tile-loaded'),this.fire('tileload',{tile:g.el,coords:o})),this._noTilesToLoad()&&(this._loading=!1,this.fire('load'),ielt9||!this._map._fadeAnimated?requestAnimFrame(this._pruneTiles,this):setTimeout(bind(this._pruneTiles,this),250)))},_getTilePos:function(o){return o.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(o){var _=new Point(this._wrapX?wrapNum(o.x,this._wrapX):o.x,this._wrapY?wrapNum(o.y,this._wrapY):o.y);return _.z=o.z,_},_pxBoundsToTileRange:function(o){var _=this.getTileSize();return new Bounds(o.min.unscaleBy(_).floor(),o.max.unscaleBy(_).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var o in this._tiles)if(!this._tiles[o].loaded)return!1;return!0}});function gridLayer(o){return new GridLayer(o)}var TileLayer=GridLayer.extend({options:{minZoom:0,maxZoom:18,subdomains:'abc',errorTileUrl:'',zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(o,_){this._url=o,_=setOptions(this,_),_.detectRetina&&retina&&0<_.maxZoom&&(_.tileSize=Math.floor(_.tileSize/2),_.zoomReverse?(_.zoomOffset--,_.minZoom++):(_.zoomOffset++,_.maxZoom--),_.minZoom=Math.max(0,_.minZoom)),'string'==typeof _.subdomains&&(_.subdomains=_.subdomains.split('')),android||this.on('tileunload',this._onTileRemove)},setUrl:function(o,_){return this._url=o,_||this.redraw(),this},createTile:function(o,_){var g=document.createElement('img');return on(g,'load',bind(this._tileOnLoad,this,_,g)),on(g,'error',bind(this._tileOnError,this,_,g)),(this.options.crossOrigin||''===this.options.crossOrigin)&&(g.crossOrigin=!0===this.options.crossOrigin?'':this.options.crossOrigin),g.alt='',g.setAttribute('role','presentation'),g.src=this.getTileUrl(o),g},getTileUrl:function(o){var _={r:retina?'@2x':'',s:this._getSubdomain(o),x:o.x,y:o.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-o.y;this.options.tms&&(_.y=g),_['-y']=g}return template(this._url,extend(_,this.options))},_tileOnLoad:function(o,_){ielt9?setTimeout(bind(o,this,null,_),0):o(null,_)},_tileOnError:function(o,_,g){var h=this.options.errorTileUrl;h&&_.getAttribute('src')!==h&&(_.src=h),o(g,_)},_onTileRemove:function(o){o.tile.onload=null},_getZoomForUrl:function(){var o=this._tileZoom,_=this.options.maxZoom,g=this.options.zoomReverse,h=this.options.zoomOffset;return g&&(o=_-o),o+h},_getSubdomain:function(o){var _=Math.abs(o.x+o.y)%this.options.subdomains.length;return this.options.subdomains[_]},_abortLoading:function(){var o,_;for(o in this._tiles)this._tiles[o].coords.z!==this._tileZoom&&(_=this._tiles[o].el,_.onload=falseFn,_.onerror=falseFn,_.complete||(_.src=emptyImageUrl,remove(_),delete this._tiles[o]))},_removeTile:function(o){var _=this._tiles[o];if(_)return androidStock||_.el.setAttribute('src',emptyImageUrl),GridLayer.prototype._removeTile.call(this,o)},_tileReady:function(o,_,g){return!this._map||g&&g.getAttribute('src')===emptyImageUrl?void 0:GridLayer.prototype._tileReady.call(this,o,_,g)}});function tileLayer(o,_){return new TileLayer(o,_)}var TileLayerWMS=TileLayer.extend({defaultWmsParams:{service:'WMS',request:'GetMap',layers:'',styles:'',format:'image/jpeg',transparent:!1,version:'1.1.1'},options:{crs:null,uppercase:!1},initialize:function(o,_){this._url=o;var g=extend({},this.defaultWmsParams);for(var h in _)h in this.options||(g[h]=_[h]);_=setOptions(this,_);var P=_.detectRetina&&retina?2:1,T=this.getTileSize();g.width=T.x*P,g.height=T.y*P,this.wmsParams=g},onAdd:function(o){this._crs=this.options.crs||o.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var _=1.3<=this._wmsVersion?'crs':'srs';this.wmsParams[_]=this._crs.code,TileLayer.prototype.onAdd.call(this,o)},getTileUrl:function(o){var _=this._tileCoordsToNwSe(o),g=this._crs,h=toBounds(g.project(_[0]),g.project(_[1])),P=h.min,T=h.max,C=(1.3<=this._wmsVersion&&this._crs===EPSG4326?[P.y,P.x,T.y,T.x]:[P.x,P.y,T.x,T.y]).join(','),Z=TileLayer.prototype.getTileUrl.call(this,o);return Z+getParamString(this.wmsParams,Z,this.options.uppercase)+(this.options.uppercase?'&BBOX=':'&bbox=')+C},setParams:function(o,_){return extend(this.wmsParams,o),_||this.redraw(),this}});function tileLayerWMS(o,_){return new TileLayerWMS(o,_)}TileLayer.WMS=TileLayerWMS,tileLayer.wms=tileLayerWMS;var Renderer=Layer.extend({options:{padding:0.1,tolerance:0},initialize:function(o){setOptions(this,o),stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&addClass(this._container,'leaflet-zoom-animated')),this.getPane().appendChild(this._container),this._update(),this.on('update',this._updatePaths,this)},onRemove:function(){this.off('update',this._updatePaths,this),this._destroyContainer()},getEvents:function(){var o={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(o.zoomanim=this._onAnimZoom),o},_onAnimZoom:function(o){this._updateTransform(o.center,o.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(o,_){var g=this._map.getZoomScale(_,this._zoom),h=getPosition(this._container),P=this._map.getSize().multiplyBy(0.5+this.options.padding),T=this._map.project(this._center,_),C=this._map.project(o,_),Z=C.subtract(T),E=P.multiplyBy(-g).add(h).add(P).subtract(Z);any3d?setTransform(this._container,E,g):setPosition(this._container,E)},_reset:function(){for(var o in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[o]._reset()},_onZoomEnd:function(){for(var o in this._layers)this._layers[o]._project()},_updatePaths:function(){for(var o in this._layers)this._layers[o]._update()},_update:function(){var o=this.options.padding,_=this._map.getSize(),g=this._map.containerPointToLayerPoint(_.multiplyBy(-o)).round();this._bounds=new Bounds(g,g.add(_.multiplyBy(1+2*o)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Canvas=Renderer.extend({getEvents:function(){var o=Renderer.prototype.getEvents.call(this);return o.viewprereset=this._onViewPreReset,o},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Renderer.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var o=this._container=document.createElement('canvas');on(o,'mousemove',throttle(this._onMouseMove,32,this),this),on(o,'click dblclick mousedown mouseup contextmenu',this._onClick,this),on(o,'mouseout',this._handleMouseOut,this),this._ctx=o.getContext('2d')},_destroyContainer:function(){cancelAnimFrame(this._redrawRequest),delete this._ctx,remove(this._container),off(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var o;for(var _ in this._redrawBounds=null,this._layers)o=this._layers[_],o._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Renderer.prototype._update.call(this);var o=this._bounds,_=this._container,g=o.getSize(),h=retina?2:1;setPosition(_,o.min),_.width=h*g.x,_.height=h*g.y,_.style.width=g.x+'px',_.style.height=g.y+'px',retina&&this._ctx.scale(2,2),this._ctx.translate(-o.min.x,-o.min.y),this.fire('update')}},_reset:function(){Renderer.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(o){this._updateDashArray(o),this._layers[stamp(o)]=o;var _=o._order={layer:o,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=_),this._drawLast=_,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(o){this._requestRedraw(o)},_removePath:function(o){var _=o._order,g=_.next,h=_.prev;g?g.prev=h:this._drawLast=h,h?h.next=g:this._drawFirst=g,delete o._order,delete this._layers[stamp(o)],this._requestRedraw(o)},_updatePath:function(o){this._extendRedrawBounds(o),o._project(),o._update(),this._requestRedraw(o)},_updateStyle:function(o){this._updateDashArray(o),this._requestRedraw(o)},_updateDashArray:function(o){if('string'==typeof o.options.dashArray){var _=o.options.dashArray.split(/[, ]+/),g=[],h;for(h=0;h<_.length;h++)g.push(+_[h]);o.options._dashArray=g}else o.options._dashArray=o.options.dashArray},_requestRedraw:function(o){this._map&&(this._extendRedrawBounds(o),this._redrawRequest=this._redrawRequest||requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(o){if(o._pxBounds){var _=(o.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Bounds,this._redrawBounds.extend(o._pxBounds.min.subtract([_,_])),this._redrawBounds.extend(o._pxBounds.max.add([_,_]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var o=this._redrawBounds;if(o){var _=o.getSize();this._ctx.clearRect(o.min.x,o.min.y,_.x,_.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var _=this._redrawBounds,o;if(this._ctx.save(),_){var g=_.getSize();this._ctx.beginPath(),this._ctx.rect(_.min.x,_.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var h=this._drawFirst;h;h=h.next)o=h.layer,(!_||o._pxBounds&&o._pxBounds.intersects(_))&&o._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(o,_){if(this._drawing){var C=o._parts,Z=C.length,E=this._ctx,g,h,P,T;if(Z){for(E.beginPath(),g=0;g<Z;g++){for(h=0,P=C[g].length;h<P;h++)T=C[g][h],E[h?'lineTo':'moveTo'](T.x,T.y);_&&E.closePath()}this._fillStroke(E,o)}}},_updateCircle:function(o){if(this._drawing&&!o._empty()){var _=o._point,g=this._ctx,h=Math.max(Math.round(o._radius),1),P=(Math.max(Math.round(o._radiusY),1)||h)/h;1!=P&&(g.save(),g.scale(1,P)),g.beginPath(),g.arc(_.x,_.y/P,h,0,2*Math.PI,!1),1!=P&&g.restore(),this._fillStroke(g,o)}},_fillStroke:function(o,_){var g=_.options;g.fill&&(o.globalAlpha=g.fillOpacity,o.fillStyle=g.fillColor||g.color,o.fill(g.fillRule||'evenodd')),g.stroke&&0!==g.weight&&(o.setLineDash&&o.setLineDash(_.options&&_.options._dashArray||[]),o.globalAlpha=g.opacity,o.lineWidth=g.weight,o.strokeStyle=g.color,o.lineCap=g.lineCap,o.lineJoin=g.lineJoin,o.stroke())},_onClick:function(o){for(var _=this._map.mouseEventToLayerPoint(o),P=this._drawFirst,g,h;P;P=P.next)g=P.layer,g.options.interactive&&g._containsPoint(_)&&!this._map._draggableMoved(g)&&(h=g);h&&(fakeStop(o),this._fireEvent([h],o))},_onMouseMove:function(o){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var _=this._map.mouseEventToLayerPoint(o);this._handleMouseHover(o,_)}},_handleMouseOut:function(o){var _=this._hoveredLayer;_&&(removeClass(this._container,'leaflet-interactive'),this._fireEvent([_],o,'mouseout'),this._hoveredLayer=null)},_handleMouseHover:function(o,_){for(var P=this._drawFirst,g,h;P;P=P.next)g=P.layer,g.options.interactive&&g._containsPoint(_)&&(h=g);h!==this._hoveredLayer&&(this._handleMouseOut(o),h&&(addClass(this._container,'leaflet-interactive'),this._fireEvent([h],o,'mouseover'),this._hoveredLayer=h)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],o)},_fireEvent:function(o,_,g){this._map._fireDOMEvent(_,g||_.type,o)},_bringToFront:function(o){var _=o._order,g=_.next,h=_.prev;if(g)g.prev=h;else return;h?h.next=g:g&&(this._drawFirst=g),_.prev=this._drawLast,this._drawLast.next=_,_.next=null,this._drawLast=_,this._requestRedraw(o)},_bringToBack:function(o){var _=o._order,g=_.next,h=_.prev;if(h)h.next=g;else return;g?g.prev=h:h&&(this._drawLast=h),_.prev=null,_.next=this._drawFirst,this._drawFirst.prev=_,this._drawFirst=_,this._requestRedraw(o)}});function canvas$1(o){return canvas?new Canvas(o):null}var vmlCreate=function(){try{return document.namespaces.add('lvml','urn:schemas-microsoft-com:vml'),function(o){return document.createElement('<lvml:'+o+' class="lvml">')}}catch(o){return function(_){return document.createElement('<'+_+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),vmlMixin={_initContainer:function(){this._container=create$1('div','leaflet-vml-container')},_update:function(){this._map._animatingZoom||(Renderer.prototype._update.call(this),this.fire('update'))},_initPath:function(o){var _=o._container=vmlCreate('shape');addClass(_,'leaflet-vml-shape '+(this.options.className||'')),_.coordsize='1 1',o._path=vmlCreate('path'),_.appendChild(o._path),this._updateStyle(o),this._layers[stamp(o)]=o},_addPath:function(o){var _=o._container;this._container.appendChild(_),o.options.interactive&&o.addInteractiveTarget(_)},_removePath:function(o){var _=o._container;remove(_),o.removeInteractiveTarget(_),delete this._layers[stamp(o)]},_updateStyle:function(o){var _=o._stroke,g=o._fill,h=o.options,P=o._container;P.stroked=!!h.stroke,P.filled=!!h.fill,h.stroke?(!_&&(_=o._stroke=vmlCreate('stroke')),P.appendChild(_),_.weight=h.weight+'px',_.color=h.color,_.opacity=h.opacity,_.dashStyle=h.dashArray?isArray(h.dashArray)?h.dashArray.join(' '):h.dashArray.replace(/( *, *)/g,' '):'',_.endcap=h.lineCap.replace('butt','flat'),_.joinstyle=h.lineJoin):_&&(P.removeChild(_),o._stroke=null),h.fill?(!g&&(g=o._fill=vmlCreate('fill')),P.appendChild(g),g.color=h.fillColor||h.color,g.opacity=h.fillOpacity):g&&(P.removeChild(g),o._fill=null)},_updateCircle:function(o){var _=o._point.round(),g=Math.round(o._radius),h=Math.round(o._radiusY||g);this._setPath(o,o._empty()?'M0 0':'AL '+_.x+','+_.y+' '+g+','+h+' 0,'+23592600)},_setPath:function(o,_){o._path.v=_},_bringToFront:function(o){toFront(o._container)},_bringToBack:function(o){toBack(o._container)}},create$2=vml?vmlCreate:svgCreate,SVG=Renderer.extend({getEvents:function(){var o=Renderer.prototype.getEvents.call(this);return o.zoomstart=this._onZoomStart,o},_initContainer:function(){this._container=create$2('svg'),this._container.setAttribute('pointer-events','none'),this._rootGroup=create$2('g'),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){remove(this._container),off(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Renderer.prototype._update.call(this);var o=this._bounds,_=o.getSize(),g=this._container;this._svgSize&&this._svgSize.equals(_)||(this._svgSize=_,g.setAttribute('width',_.x),g.setAttribute('height',_.y)),setPosition(g,o.min),g.setAttribute('viewBox',[o.min.x,o.min.y,_.x,_.y].join(' ')),this.fire('update')}},_initPath:function(o){var _=o._path=create$2('path');o.options.className&&addClass(_,o.options.className),o.options.interactive&&addClass(_,'leaflet-interactive'),this._updateStyle(o),this._layers[stamp(o)]=o},_addPath:function(o){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(o._path),o.addInteractiveTarget(o._path)},_removePath:function(o){remove(o._path),o.removeInteractiveTarget(o._path),delete this._layers[stamp(o)]},_updatePath:function(o){o._project(),o._update()},_updateStyle:function(o){var _=o._path,g=o.options;_&&(g.stroke?(_.setAttribute('stroke',g.color),_.setAttribute('stroke-opacity',g.opacity),_.setAttribute('stroke-width',g.weight),_.setAttribute('stroke-linecap',g.lineCap),_.setAttribute('stroke-linejoin',g.lineJoin),g.dashArray?_.setAttribute('stroke-dasharray',g.dashArray):_.removeAttribute('stroke-dasharray'),g.dashOffset?_.setAttribute('stroke-dashoffset',g.dashOffset):_.removeAttribute('stroke-dashoffset')):_.setAttribute('stroke','none'),g.fill?(_.setAttribute('fill',g.fillColor||g.color),_.setAttribute('fill-opacity',g.fillOpacity),_.setAttribute('fill-rule',g.fillRule||'evenodd')):_.setAttribute('fill','none'))},_updatePoly:function(o,_){this._setPath(o,pointsToPath(o._parts,_))},_updateCircle:function(o){var _=o._point,g=Math.max(Math.round(o._radius),1),h=Math.max(Math.round(o._radiusY),1)||g,P='a'+g+','+h+' 0 1,0 ',T=o._empty()?'M0 0':'M'+(_.x-g)+','+_.y+P+2*g+',0 '+P+2*-g+',0 ';this._setPath(o,T)},_setPath:function(o,_){o._path.setAttribute('d',_)},_bringToFront:function(o){toFront(o._path)},_bringToBack:function(o){toBack(o._path)}});vml&&SVG.include(vmlMixin);function svg$1(o){return svg||vml?new SVG(o):null}Map.include({getRenderer:function(o){var _=o.options.renderer||this._getPaneRenderer(o.options.pane)||this.options.renderer||this._renderer;return _||(_=this._renderer=this._createRenderer()),this.hasLayer(_)||this.addLayer(_),_},_getPaneRenderer:function(o){if('overlayPane'===o||void 0===o)return!1;var _=this._paneRenderers[o];return void 0===_&&(_=this._createRenderer({pane:o}),this._paneRenderers[o]=_),_},_createRenderer:function(o){return this.options.preferCanvas&&canvas$1(o)||svg$1(o)}});var Rectangle=Polygon.extend({initialize:function(o,_){Polygon.prototype.initialize.call(this,this._boundsToLatLngs(o),_)},setBounds:function(o){return this.setLatLngs(this._boundsToLatLngs(o))},_boundsToLatLngs:function(o){return o=toLatLngBounds(o),[o.getSouthWest(),o.getNorthWest(),o.getNorthEast(),o.getSouthEast()]}});function rectangle(o,_){return new Rectangle(o,_)}SVG.create=create$2,SVG.pointsToPath=pointsToPath,GeoJSON.geometryToLayer=geometryToLayer,GeoJSON.coordsToLatLng=coordsToLatLng,GeoJSON.coordsToLatLngs=coordsToLatLngs,GeoJSON.latLngToCoords=latLngToCoords,GeoJSON.latLngsToCoords=latLngsToCoords,GeoJSON.getFeature=getFeature,GeoJSON.asFeature=asFeature,Map.mergeOptions({boxZoom:!0});var BoxZoom=Handler.extend({initialize:function(o){this._map=o,this._container=o._container,this._pane=o._panes.overlayPane,this._resetStateTimeout=0,o.on('unload',this._destroy,this)},addHooks:function(){on(this._container,'mousedown',this._onMouseDown,this)},removeHooks:function(){off(this._container,'mousedown',this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){remove(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(o){return o.shiftKey&&(1===o.which||1===o.button)&&void(this._clearDeferredResetState(),this._resetState(),disableTextSelection(),disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(o),on(document,{contextmenu:stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this))},_onMouseMove:function(o){this._moved||(this._moved=!0,this._box=create$1('div','leaflet-zoom-box',this._container),addClass(this._container,'leaflet-crosshair'),this._map.fire('boxzoomstart')),this._point=this._map.mouseEventToContainerPoint(o);var _=new Bounds(this._point,this._startPoint),g=_.getSize();setPosition(this._box,_.min),this._box.style.width=g.x+'px',this._box.style.height=g.y+'px'},_finish:function(){this._moved&&(remove(this._box),removeClass(this._container,'leaflet-crosshair')),enableTextSelection(),enableImageDrag(),off(document,{contextmenu:stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(o){if((1===o.which||1===o.button)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(bind(this._resetState,this),0);var _=new LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(_).fire('boxzoomend',{boxZoomBounds:_})}},_onKeyDown:function(o){27===o.keyCode&&this._finish()}});Map.addInitHook('addHandler','boxZoom',BoxZoom),Map.mergeOptions({doubleClickZoom:!0});var DoubleClickZoom=Handler.extend({addHooks:function(){this._map.on('dblclick',this._onDoubleClick,this)},removeHooks:function(){this._map.off('dblclick',this._onDoubleClick,this)},_onDoubleClick:function(o){var _=this._map,g=_.getZoom(),h=_.options.zoomDelta,P=o.originalEvent.shiftKey?g-h:g+h;'center'===_.options.doubleClickZoom?_.setZoom(P):_.setZoomAround(o.containerPoint,P)}});Map.addInitHook('addHandler','doubleClickZoom',DoubleClickZoom),Map.mergeOptions({dragging:!0,inertia:!android23,inertiaDeceleration:3400,inertiaMaxSpeed:Infinity,easeLinearity:0.2,worldCopyJump:!1,maxBoundsViscosity:0});var Drag=Handler.extend({addHooks:function(){if(!this._draggable){var o=this._map;this._draggable=new Draggable(o._mapPane,o._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on('predrag',this._onPreDragLimit,this),o.options.worldCopyJump&&(this._draggable.on('predrag',this._onPreDragWrap,this),o.on('zoomend',this._onZoomEnd,this),o.whenReady(this._onZoomEnd,this))}addClass(this._map._container,'leaflet-grab leaflet-touch-drag'),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){removeClass(this._map._container,'leaflet-grab'),removeClass(this._map._container,'leaflet-touch-drag'),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var o=this._map;if(o._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var _=toLatLngBounds(this._map.options.maxBounds);this._offsetLimit=toBounds(this._map.latLngToContainerPoint(_.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(_.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;o.fire('movestart').fire('dragstart'),o.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(o){if(this._map.options.inertia){var _=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(_),this._prunePositions(_)}this._map.fire('move',o).fire('drag',o)},_prunePositions:function(o){for(;1<this._positions.length&&50<o-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var o=this._map.getSize().divideBy(2),_=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=_.subtract(o).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(o,_){return o-(o-_)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var o=this._draggable._newPos.subtract(this._draggable._startPos),_=this._offsetLimit;o.x<_.min.x&&(o.x=this._viscousLimit(o.x,_.min.x)),o.y<_.min.y&&(o.y=this._viscousLimit(o.y,_.min.y)),o.x>_.max.x&&(o.x=this._viscousLimit(o.x,_.max.x)),o.y>_.max.y&&(o.y=this._viscousLimit(o.y,_.max.y)),this._draggable._newPos=this._draggable._startPos.add(o)}},_onPreDragWrap:function(){var o=this._worldWidth,_=Math.round(o/2),g=this._initialWorldOffset,h=this._draggable._newPos.x,P=(h-_+g)%o+_-g,T=(h+_+g)%o-_-g,C=Math.abs(P+g)<Math.abs(T+g)?P:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(o){var _=this._map,g=_.options,h=!g.inertia||2>this._times.length;if(_.fire('dragend',o),h)_.fire('moveend');else{this._prunePositions(+new Date);var P=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,C=g.easeLinearity,Z=P.multiplyBy(C/T),E=Z.distanceTo([0,0]),B=Math.min(g.inertiaMaxSpeed,E),A=Z.multiplyBy(B/E),I=B/(g.inertiaDeceleration*C),O=A.multiplyBy(-I/2).round();O.x||O.y?(O=_._limitOffset(O,_.options.maxBounds),requestAnimFrame(function(){_.panBy(O,{duration:I,easeLinearity:C,noMoveStart:!0,animate:!0})})):_.fire('moveend')}}});Map.addInitHook('addHandler','dragging',Drag),Map.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Keyboard=Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(o){this._map=o,this._setPanDelta(o.options.keyboardPanDelta),this._setZoomDelta(o.options.zoomDelta)},addHooks:function(){var o=this._map._container;0>=o.tabIndex&&(o.tabIndex='0'),on(o,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var o=document.body,_=document.documentElement,g=o.scrollTop||_.scrollTop,h=o.scrollLeft||_.scrollLeft;this._map._container.focus(),window.scrollTo(h,g)}},_onFocus:function(){this._focused=!0,this._map.fire('focus')},_onBlur:function(){this._focused=!1,this._map.fire('blur')},_setPanDelta:function(o){var _=this._panKeys={},g=this.keyCodes,h,P;for(h=0,P=g.left.length;h<P;h++)_[g.left[h]]=[-1*o,0];for(h=0,P=g.right.length;h<P;h++)_[g.right[h]]=[o,0];for(h=0,P=g.down.length;h<P;h++)_[g.down[h]]=[0,o];for(h=0,P=g.up.length;h<P;h++)_[g.up[h]]=[0,-1*o]},_setZoomDelta:function(o){var _=this._zoomKeys={},g=this.keyCodes,h,P;for(h=0,P=g.zoomIn.length;h<P;h++)_[g.zoomIn[h]]=o;for(h=0,P=g.zoomOut.length;h<P;h++)_[g.zoomOut[h]]=-o},_addHooks:function(){on(document,'keydown',this._onKeyDown,this)},_removeHooks:function(){off(document,'keydown',this._onKeyDown,this)},_onKeyDown:function(o){if(!(o.altKey||o.ctrlKey||o.metaKey)){var _=o.keyCode,g=this._map,h;if(_ in this._panKeys)g._panAnim&&g._panAnim._inProgress||(h=this._panKeys[_],o.shiftKey&&(h=toPoint(h).multiplyBy(3)),g.panBy(h),g.options.maxBounds&&g.panInsideBounds(g.options.maxBounds));else if(_ in this._zoomKeys)g.setZoom(g.getZoom()+(o.shiftKey?3:1)*this._zoomKeys[_]);else if(27===_&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;stop(o)}}});Map.addInitHook('addHandler','keyboard',Keyboard),Map.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ScrollWheelZoom=Handler.extend({addHooks:function(){on(this._map._container,'mousewheel',this._onWheelScroll,this),this._delta=0},removeHooks:function(){off(this._map._container,'mousewheel',this._onWheelScroll,this)},_onWheelScroll:function(o){var _=getWheelDelta(o),g=this._map.options.wheelDebounceTime;this._delta+=_,this._lastMousePos=this._map.mouseEventToContainerPoint(o),this._startTime||(this._startTime=+new Date);var h=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(bind(this._performZoom,this),h),stop(o)},_performZoom:function(){var o=this._map,_=o.getZoom(),g=this._map.options.zoomSnap||0;o._stop();var h=this._delta/(4*this._map.options.wheelPxPerZoomLevel),P=4*Math.log(2/(1+Math.exp(-Math.abs(h))))/Math.LN2,T=g?Math.ceil(P/g)*g:P,C=o._limitZoom(_+(0<this._delta?T:-T))-_;this._delta=0,this._startTime=null;C&&('center'===o.options.scrollWheelZoom?o.setZoom(_+C):o.setZoomAround(this._lastMousePos,_+C))}});Map.addInitHook('addHandler','scrollWheelZoom',ScrollWheelZoom),Map.mergeOptions({tap:!0,tapTolerance:15});var Tap=Handler.extend({addHooks:function(){on(this._map._container,'touchstart',this._onDown,this)},removeHooks:function(){off(this._map._container,'touchstart',this._onDown,this)},_onDown:function(o){if(o.touches){if(preventDefault(o),this._fireClick=!0,1<o.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var _=o.touches[0],g=_.target;this._startPos=this._newPos=new Point(_.clientX,_.clientY),g.tagName&&'a'===g.tagName.toLowerCase()&&addClass(g,'leaflet-active'),this._holdTimeout=setTimeout(bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent('contextmenu',_))},this),1e3),this._simulateEvent('mousedown',_),on(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(o){if(clearTimeout(this._holdTimeout),off(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&o&&o.changedTouches){var _=o.changedTouches[0],g=_.target;g&&g.tagName&&'a'===g.tagName.toLowerCase()&&removeClass(g,'leaflet-active'),this._simulateEvent('mouseup',_),this._isTapValid()&&this._simulateEvent('click',_)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(o){var _=o.touches[0];this._newPos=new Point(_.clientX,_.clientY),this._simulateEvent('mousemove',_)},_simulateEvent:function(o,_){var g=document.createEvent('MouseEvents');g._simulated=!0,_.target._simulatedClick=!0,g.initMouseEvent(o,!0,!0,window,1,_.screenX,_.screenY,_.clientX,_.clientY,!1,!1,!1,!1,0,null),_.target.dispatchEvent(g)}});touch&&!pointer&&Map.addInitHook('addHandler','tap',Tap),Map.mergeOptions({touchZoom:touch&&!android23,bounceAtZoomLimits:!0});var TouchZoom=Handler.extend({addHooks:function(){addClass(this._map._container,'leaflet-touch-zoom'),on(this._map._container,'touchstart',this._onTouchStart,this)},removeHooks:function(){removeClass(this._map._container,'leaflet-touch-zoom'),off(this._map._container,'touchstart',this._onTouchStart,this)},_onTouchStart:function(o){var _=this._map;if(!(!o.touches||2!==o.touches.length||_._animatingZoom||this._zooming)){var g=_.mouseEventToContainerPoint(o.touches[0]),h=_.mouseEventToContainerPoint(o.touches[1]);this._centerPoint=_.getSize()._divideBy(2),this._startLatLng=_.containerPointToLatLng(this._centerPoint),'center'!==_.options.touchZoom&&(this._pinchStartLatLng=_.containerPointToLatLng(g.add(h)._divideBy(2))),this._startDist=g.distanceTo(h),this._startZoom=_.getZoom(),this._moved=!1,this._zooming=!0,_._stop(),on(document,'touchmove',this._onTouchMove,this),on(document,'touchend',this._onTouchEnd,this),preventDefault(o)}},_onTouchMove:function(o){if(o.touches&&2===o.touches.length&&this._zooming){var _=this._map,g=_.mouseEventToContainerPoint(o.touches[0]),h=_.mouseEventToContainerPoint(o.touches[1]),P=g.distanceTo(h)/this._startDist;if(this._zoom=_.getScaleZoom(P,this._startZoom),!_.options.bounceAtZoomLimits&&(this._zoom<_.getMinZoom()&&1>P||this._zoom>_.getMaxZoom()&&1<P)&&(this._zoom=_._limitZoom(this._zoom)),'center'!==_.options.touchZoom){var T=g._add(h)._divideBy(2)._subtract(this._centerPoint);if(1==P&&0===T.x&&0===T.y)return;this._center=_.unproject(_.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}else if(this._center=this._startLatLng,1==P)return;this._moved||(_._moveStart(!0,!1),this._moved=!0),cancelAnimFrame(this._animRequest);var C=bind(_._move,_,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=requestAnimFrame(C,this,!0),preventDefault(o)}},_onTouchEnd:function(){return this._moved&&this._zooming?void(this._zooming=!1,cancelAnimFrame(this._animRequest),off(document,'touchmove',this._onTouchMove),off(document,'touchend',this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):void(this._zooming=!1)}});Map.addInitHook('addHandler','touchZoom',TouchZoom),Map.BoxZoom=BoxZoom,Map.DoubleClickZoom=DoubleClickZoom,Map.Drag=Drag,Map.Keyboard=Keyboard,Map.ScrollWheelZoom=ScrollWheelZoom,Map.Tap=Tap,Map.TouchZoom=TouchZoom,Object.freeze=freeze;export{version,Control,control,Browser,Evented,Mixin,Util,Class,Handler,extend,bind,stamp,setOptions,DomEvent,DomUtil,PosAnimation,Draggable,LineUtil,PolyUtil,Point,toPoint as point,Bounds,toBounds as bounds,Transformation,toTransformation as transformation,index as Projection,LatLng,toLatLng as latLng,LatLngBounds,toLatLngBounds as latLngBounds,CRS,GeoJSON,geoJSON,geoJson,Layer,LayerGroup,layerGroup,FeatureGroup,featureGroup,ImageOverlay,imageOverlay,VideoOverlay,videoOverlay,DivOverlay,Popup,popup,Tooltip,tooltip,Icon,icon,DivIcon,divIcon,Marker,marker,TileLayer,tileLayer,GridLayer,gridLayer,SVG,svg$1 as svg,Renderer,Canvas,canvas$1 as canvas,Path,CircleMarker,circleMarker,Circle,circle,Polyline,polyline,Polygon,polygon,Rectangle,rectangle,Map,createMap as map};
